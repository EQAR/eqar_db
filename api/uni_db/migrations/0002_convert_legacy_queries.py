# Generated by Django 3.1.2 on 2021-11-07 17:58

import json

from django.db import migrations

from rest_framework import routers

from uni_db.views_meta import UniDB

def model_reverse_lookup(db_table):
    if db_table:
        for viewset in UniDB.Tables:
            if viewset.queryset.model._meta.db_table == db_table:
                slug = routers.DefaultRouter.get_default_basename(None, viewset)
                return routers.DefaultRouter.get_default_basename(None, viewset)
    return None

def insert_legacy_queries(apps, schema_editor):

    User = apps.get_model('auth', 'User')
    RawQuery = apps.get_model('uni_db', 'RawQuery')

    try:
        default_user = User.objects.get(username='_queries')
    except (User.DoesNotExist):
        default_user = User(
            username='_queries',
            email='no-reply@eqar.eu'
        )
        default_user.save()

    legacy_data = json.loads(LEGACY_QUERIES)

    for key, query in legacy_data['queries'].items():
        try:
            RawQuery.objects.get(id=query['name'])
        except (RawQuery.DoesNotExist):
            q = RawQuery(
                id=query['name'],
                description=query['description'],
                sql=query['sql'],
                is_shared=True if query['isPublic'] else False,
                underlying_table=model_reverse_lookup(query['underlyingTable']),
                owner=default_user
            )
            q.save()
        else:
            print(f"Query [{query['name']}] already exists, skipped.")


class Migration(migrations.Migration):

    dependencies = [
        ('uni_db', '0001_initial'),
    ]

    operations = [
        migrations.RunPython(insert_legacy_queries)
    ]

############################## DATA BELOW ###############################################################

LEGACY_QUERIES = r"""{
  "mtime": false,
  "queries": {
    ".system.0": {
      "name": null,
      "description": "Agencies: reminders",
      "section": "query",
      "userQuery": false,
      "saveQuery": false,
      "isPublic": true,
      "priKey": "rid",
      "searchable": true,
      "underlyingTable": "registeredAgency",
      "templates": [],
      "allowNew": true,
      "allowEdit": true,
      "allowDelete": false,
      "sql": "SELECT registeredAgency.rid AS id, registeredAgency.shortname, registeredAgency.reminder, registeredAgency.comment FROM registeredAgency WHERE registered AND reminder <= NOW() ORDER BY reminder"
    },
    ".system.1": {
      "name": null,
      "description": "Applications: fee invoices to be made",
      "section": "query",
      "userQuery": false,
      "saveQuery": false,
      "isPublic": true,
      "priKey": "aid",
      "searchable": true,
      "underlyingTable": "applications",
      "templates": [],
      "allowNew": true,
      "allowEdit": true,
      "allowDelete": false,
      "sql": "SELECT applications.aid AS id, applications_rid.shortname, applications.submitDate, applications.stage, invoiceNo FROM ( applications ) LEFT JOIN registeredAgency AS applications_rid ON ( applications_rid.rid = applications.rid ) WHERE (applications.stage > '2. Waiting report') AND (invoiceNo IS NULL) AND (applications.aid > 0)"
    },
    "1799fd2a8dd78a3d89ec00db4eec7be7": {
      "name": "1799fd2a8dd78a3d89ec00db4eec7be7",
      "description": "Applications: time delays",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 0,
      "priKey": "_count",
      "searchable": 0,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "select applications.aid, applications.selectName, datediff(applications.reportSubmitted, applications.submitDate) as review_time, datediff(applications.reportSubmitted, applications.reportExpected) as report_delay, datediff(applications.decisionDate, applications.reportSubmitted) as eqar_time from applications where applications.reportSubmitted is not null and applications.submitDate is not null and applications.decisionDate is not null order by aid desc"
    },
    "2a5355d5fd259324886d56981d08ae68": {
      "name": "2a5355d5fd259324886d56981d08ae68",
      "description": "Substantive Change Reports: stats reports per agency",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 0,
      "priKey": "_count",
      "searchable": 0,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "select reports as `Reports`,count(rid) as `Agencies` from (select rid,shortname,count(distinct crid) as reports from registeredAgency left join changeReport using(rid) where registered group by rid) as agencies group by reports with rollup"
    },
    "5bcbd7cee43a0e6c1e2ffe5731fdef1d": {
      "name": "5bcbd7cee43a0e6c1e2ffe5731fdef1d",
      "description": "DEQAR CONNECT: data for ASHE",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 0,
      "priKey": "_count",
      "searchable": 0,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "select deqarConnectPartner.pid, registeredAgency.shortname, registeredAgency.registeredSince, contact.firstName, contact.lastName, contact.email, GROUP_CONCAT(distinct contact_technical_cc.email SEPARATOR ', ' ) AS cc,\n contact.phone, contact.mobile, coalesce(agencyUpdate.year,'== TOTAL ==') as year, coalesce(agencyUpdate.type,'== TOTAL ==') as type, sum(agencyUpdate.amount) as count from deqarConnectPartner left join registeredAgency using(oid) left join contact on contact.cid = deqarConnectPartner.contact_technical left join contact_organisation using(oid) LEFT JOIN contact AS contact_technical_cc ON ( contact_technical_cc.cid != COALESCE(deqarConnectPartner.contact_technical, 0) AND ( contact_technical_cc.cid = contact_organisation.cid ) AND contact_organisation.senddeqar ) \nleft join agencyUpdate using(rid) where deqarConnectPartner.type = 'QAA' group by registeredAgency.shortname, agencyUpdate.year, agencyUpdate.type with rollup"
    },
    "7d6d7b292add59d0047a86365de97f86": {
      "name": "7d6d7b292add59d0047a86365de97f86",
      "description": "EQAR members: statistics",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 0,
      "priKey": "_count",
      "searchable": 0,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "select\n  IF(country.eu,'EU','Non-EU') as EU,\n  count(distinct iso3) as countries,\n  count(distinct mid) as members\nfrom country\nleft join organisation on organisation.country = iso2\nleft join member on member.oid = organisation.oid and member.cat = 'GOV'\nwhere\n  country.ehea\ngroup by\n  country.eu"
    },
    "87b93ccfb20f4fa070f935e8f78a2987": {
      "name": "87b93ccfb20f4fa070f935e8f78a2987",
      "description": "Substantive Change Reports: open",
      "section": "query",
      "userQuery": "true",
      "saveQuery": "1",
      "isPublic": "0",
      "priKey": "crid",
      "searchable": 1,
      "underlyingTable": "changeReport",
      "templates": [],
      "allowNew": true,
      "allowEdit": true,
      "allowDelete": false,
      "sql": "select\n  changeReport.crid AS id,\n  registeredAgency.shortname AS applicant,\n  changeReport.submitdate ,\n  changeReport.stage,\n  concat(r1.person,', ',r2.person) AS rapporteurs,\n  sec.person AS secretary\nfrom changeReport\nleft join registeredAgency using(rid)\nleft join organisation using(oid)\nleft join contact as r1 on (r1.cid = changeReport.rapporteur1 )\nleft join contact as r2 on (r2.cid = changeReport.rapporteur2 )\nleft join contact as sec on (sec.cid = changeReport.secretary )\nwhere stage < '4. Completed' /* and sec.person like %s */\norder by stage, changeReport.submitdate desc"
    },
    "98092fa854ef5843da867dc40e8fd97d": {
      "name": "98092fa854ef5843da867dc40e8fd97d",
      "description": "Applications: RC vs panel conclusions cumulated",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 0,
      "priKey": "aid",
      "searchable": 0,
      "underlyingTable": "applications",
      "templates": [],
      "allowNew": true,
      "allowEdit": true,
      "allowDelete": false,
      "sql": "select applications.aid AS id, registeredAgency.shortname, applications.reportDate, applications.decisionDate, ( (panel_2_1 = rc_2_1) or (panel_2_1 in (\"Full compliance\", \"Substantial compliance\") and rc_2_1 = \"Compliance\") ) + ( (panel_2_2 = rc_2_2) or (panel_2_2 in (\"Full compliance\", \"Substantial compliance\") and rc_2_2 = \"Compliance\") ) + ( (panel_2_3 = rc_2_3) or (panel_2_3 in (\"Full compliance\", \"Substantial compliance\") and rc_2_3 = \"Compliance\") ) + ( (panel_2_4 = rc_2_4) or (panel_2_4 in (\"Full compliance\", \"Substantial compliance\") and rc_2_4 = \"Compliance\") ) + ( (panel_2_5 = rc_2_5) or (panel_2_5 in (\"Full compliance\", \"Substantial compliance\") and rc_2_5 = \"Compliance\") ) + ( (panel_2_6 = rc_2_6) or (panel_2_6 in (\"Full compliance\", \"Substantial compliance\") and rc_2_6 = \"Compliance\") ) + ( (panel_2_7 = rc_2_7) or (panel_2_7 in (\"Full compliance\", \"Substantial compliance\") and rc_2_7 = \"Compliance\") ) + ( (panel_3_1 = rc_3_1) or (panel_3_1 in (\"Full compliance\", \"Substantial compliance\") and rc_3_1 = \"Compliance\") ) + ( (panel_3_2 = rc_3_2) or (panel_3_2 in (\"Full compliance\", \"Substantial compliance\") and rc_3_2 = \"Compliance\") ) + ( (panel_3_3 = rc_3_3) or (panel_3_3 in (\"Full compliance\", \"Substantial compliance\") and rc_3_3 = \"Compliance\") ) + ( (panel_3_4 = rc_3_4) or (panel_3_4 in (\"Full compliance\", \"Substantial compliance\") and rc_3_4 = \"Compliance\") ) + ( (panel_3_5 = rc_3_5) or (panel_3_5 in (\"Full compliance\", \"Substantial compliance\") and rc_3_5 = \"Compliance\") ) + ( (panel_3_6 = rc_3_6) or (panel_3_6 in (\"Full compliance\", \"Substantial compliance\") and rc_3_6 = \"Compliance\") ) AS conclusion_equal from applications left join registeredAgency using(rid) where panel_2_1 is not null and stage = '8. Completed' order by applications.reportDate"
    },
    "d26c473eec10275f9bebbc8ce249f67d": {
      "name": "d26c473eec10275f9bebbc8ce249f67d",
      "description": "External QA activity: CHECK wrong crossBorder flag",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 0,
      "priKey": "uid",
      "searchable": 1,
      "underlyingTable": "agencyUpdate",
      "templates": [],
      "allowNew": true,
      "allowEdit": true,
      "allowDelete": true,
      "sql": "SELECT\n  agencyUpdate.uid AS id,\n  registeredAgency.shortname ,\n  agencyUpdate.country ,\n  agencyUpdate.year ,\n  agencyUpdate.type ,\n  agencyUpdate.amount ,\n  agencyUpdate.source ,\n  IF(agencyUpdate.crossborder,'Yes','No') as crossborder ,\n  IF(\n    (\n      -- general rule: review in other country is cross-border\n      agencyUpdate.country != registeredAgency.baseCountry \n      -- but exception: NVAO working in Belgium is not considered cross-border\n      AND NOT ( rid = 20 /* NVAO */ AND country = 'BEL' )\n    ) OR (\n      -- in addition, any agency considered European/international by nature working anywhere is cross-border\n      rid IN ( '31' /* IEP */ , '27' /* ECCE */, '35' /* EAPAA */, '43' /* MusiQuE */, '63' /* EAEVE */ )\n    ),'Yes','No') as crossborder_should\nFROM agencyUpdate\nLEFT JOIN registeredAgency USING(rid)\nHAVING crossborder != crossborder_should"
    },
    "07f084d6ab5873c996a4a7f64e4f43a1": {
      "name": "07f084d6ab5873c996a4a7f64e4f43a1",
      "description": "Applications: overall stats",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "_count",
      "searchable": 1,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "SELECT coalesce(type,'-- TOTAL --') AS `Type`,coalesce(result,'-- TOTAL --') AS `Decision`,count(*) as `N` from applications  where stage in ('8. Completed', '-- Withdrawn') /* and (decisionDate <= %s or aid <= 25) */ group by type,result with rollup"
    },
    "09810926ad24ddd740aa8b633b6f8083": {
      "name": "09810926ad24ddd740aa8b633b6f8083",
      "description": "External QA activity: by year and agency (only cross-border)",
      "section": "query",
      "userQuery": "true",
      "saveQuery": "1",
      "isPublic": "1",
      "priKey": "_count",
      "searchable": 1,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "select\n  registeredAgency.shortname,\n  agencyUpdate.year,\n  sum(agencyUpdate.amount) as amount,\n  group_concat(DISTINCT agencyUpdate.country) as countries\n\nfrom agencyUpdate\nleft join registeredAgency using(rid) \n\nwhere agencyUpdate.crossborder /* AND registeredAgency.basecountry = %s */\n\ngroup by agencyUpdate.rid,agencyUpdate.year"
    },
    "163091c4d4714035941d1e21f0b2e0a9": {
      "name": "163091c4d4714035941d1e21f0b2e0a9",
      "description": "Agencies: with applications and reports",
      "section": "query",
      "userQuery": "true",
      "saveQuery": "1",
      "isPublic": "1",
      "priKey": "_count",
      "searchable": 0,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "SELECT registeredAgency.shortname AS Agency, applications.submitDate AS Date, 'Application' AS Type FROM registeredAgency LEFT JOIN applications USING(rid) UNION SELECT registeredAgency.shortname AS Agency, changeReport.submitdate AS Date, 'Substantive Change' AS Type FROM registeredAgency LEFT JOIN changeReport USING(rid) ORDER BY Agency, Date DESC"
    },
    "2c482f09e16011dc64f1d2b1cc04385f": {
      "name": "2c482f09e16011dc64f1d2b1cc04385f",
      "description": "DEQAR: potential partners for DEQAR-2 proposal",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "rid",
      "searchable": 0,
      "underlyingTable": "registeredAgency",
      "templates": [],
      "allowNew": true,
      "allowEdit": true,
      "allowDelete": false,
      "sql": "select\n  rid AS id,\n  shortname,\n  if(deqarPartner.oid,'Yes','No') as deqar1_partner,\n  if(eu,'Yes','No') as from_eu,\n  registeredAgency.registeredsince,\n  if(registeredAgency.registeredsince > '2017-03-01','No','Yes') as registered_2017,\n  contact.firstname,\n  contact.lastname ,\n  contact.email ,\n  group_concat(othercontact.email) as cc \nfrom registeredAgency\nleft join deqarPartner using(oid)\nleft join country on country.iso3 = registeredAgency.baseCountry\nleft join contact on contact.cid = registeredAgency.maincontact \nleft join contact_organisation on\ncontact_organisation.oid = registeredAgency.oid and ( contact_organisation.sendofficial or contact_organisation.senddeqar) and contact_organisation.cid != registeredAgency.maincontact\nleft join contact as othercontact on othercontact.cid = contact_organisation.cid \nwhere registered\ngroup by rid"
    },
    "2ca0556d13d18ad1295e9d83eba50dcb": {
      "name": "2ca0556d13d18ad1295e9d83eba50dcb",
      "description": "External QA activity: CB by target country (within EHEA)",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "_count",
      "searchable": 0,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "SELECT\n  country.name AS country,\n  (SELECT SUM(amount) FROM agencyUpdate WHERE agencyUpdate.country = country.iso3 AND agencyUpdate.crossborder AND agencyUpdate.year = '2014') AS cb_2014,\n  (SELECT SUM(amount) FROM agencyUpdate WHERE agencyUpdate.country = country.iso3 AND agencyUpdate.year = '2014') AS total_2014,\n  (SELECT SUM(amount) FROM agencyUpdate WHERE agencyUpdate.country = country.iso3 AND agencyUpdate.crossborder AND agencyUpdate.year = '2015') AS cb_2015,\n  (SELECT SUM(amount) FROM agencyUpdate WHERE agencyUpdate.country = country.iso3 AND agencyUpdate.year = '2015') AS total_2015,\n  (SELECT SUM(amount) FROM agencyUpdate WHERE agencyUpdate.country = country.iso3 AND agencyUpdate.crossborder AND agencyUpdate.year = '2016') AS cb_2016,\n  (SELECT SUM(amount) FROM agencyUpdate WHERE agencyUpdate.country = country.iso3 AND agencyUpdate.year = '2016') AS total_2016,\n  (SELECT SUM(amount) FROM agencyUpdate WHERE agencyUpdate.country = country.iso3 AND agencyUpdate.crossborder AND agencyUpdate.year = '2017') AS cb_2017,\n  (SELECT SUM(amount) FROM agencyUpdate WHERE agencyUpdate.country = country.iso3 AND agencyUpdate.year = '2017') AS total_2017,\n  (SELECT SUM(amount) FROM agencyUpdate WHERE agencyUpdate.country = country.iso3 AND agencyUpdate.crossborder AND agencyUpdate.year = '2018') AS cb_2018,\n  (SELECT SUM(amount) FROM agencyUpdate WHERE agencyUpdate.country = country.iso3 AND agencyUpdate.year = '2018') AS total_2018,\n(SELECT SUM(amount) FROM agencyUpdate WHERE agencyUpdate.country = country.iso3 AND agencyUpdate.crossborder AND agencyUpdate.year = '2019') AS cb_2019,\n  (SELECT SUM(amount) FROM agencyUpdate WHERE agencyUpdate.country = country.iso3 AND agencyUpdate.year = '2019') AS total_2019 FROM country\nWHERE ehea\nORDER BY cb_2019 DESC"
    },
    "2e8807559854d41a9c845b13d6c60704": {
      "name": "2e8807559854d41a9c845b13d6c60704",
      "description": "Applications: RC vs panel conclusions - by standard",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "_count",
      "searchable": 0,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "SELECT '2.1' AS `Standard`,\n    (SELECT count(*) FROM applications WHERE ((panel_2_1 = rc_2_1) OR (panel_2_1 IN ('Full compliance', 'Substantial compliance') AND rc_2_1 = 'Compliance')) AND stage = '8. Completed' AND rc_2_1 IS NOT NULL) AS `Same conclusion`,\n    (SELECT count(*) FROM applications WHERE ((panel_2_1 IN ('Full compliance', 'Substantial compliance') AND rc_2_1 IN ('Partial compliance', 'Non-compliance')) OR (panel_2_1 = 'Partial compliance' AND rc_2_1 = 'Non-compliance')) AND stage = '8. Completed' AND rc_2_1 IS NOT NULL) AS `Downgraded`,\n    (SELECT count(*) FROM applications WHERE ((panel_2_1 = 'Partial compliance' AND rc_2_1 = 'Compliance') OR (panel_2_1 = 'Non-Compliance' AND rc_2_1 IN ('Partial compliance', 'Compliance'))) AND stage = '8. Completed' AND rc_2_1 IS NOT NULL) AS `Upgraded`,\n    (SELECT count(*) FROM applications LEFT JOIN applicationClarification USING(aid) WHERE esg_2_1 = 1 AND stage = '8. Completed' AND rc_2_1 IS NOT NULL) AS `Clarifications`\nUNION SELECT '2.2' AS `Standard`,\n    (SELECT count(*) FROM applications WHERE ((panel_2_2 = rc_2_2) OR (panel_2_2 IN ('Full compliance', 'Substantial compliance') AND rc_2_2 = 'Compliance')) AND stage = '8. Completed' AND rc_2_2 IS NOT NULL) AS `Same conclusion`,\n    (SELECT count(*) FROM applications WHERE ((panel_2_2 IN ('Full compliance', 'Substantial compliance') AND rc_2_2 IN ('Partial compliance', 'Non-compliance')) OR (panel_2_2 = 'Partial compliance' AND rc_2_2 = 'Non-compliance')) AND stage = '8. Completed' AND rc_2_2 IS NOT NULL) AS `Downgraded`,\n    (SELECT count(*) FROM applications WHERE ((panel_2_2 = 'Partial compliance' AND rc_2_2 = 'Compliance') OR (panel_2_2 = 'Non-Compliance' AND rc_2_2 IN ('Partial compliance', 'Compliance'))) AND stage = '8. Completed' AND rc_2_2 IS NOT NULL) AS `Upgraded`,\n    (SELECT count(*) FROM applications LEFT JOIN applicationClarification USING(aid) WHERE esg_2_2 = 1 AND stage = '8. Completed' AND rc_2_2 IS NOT NULL) AS `Clarifications`\n    UNION SELECT '2.3' AS `Standard`,\n    (SELECT count(*) FROM applications WHERE ((panel_2_3 = rc_2_3) OR (panel_2_3 IN ('Full compliance', 'Substantial compliance') AND rc_2_3 = 'Compliance')) AND stage = '8. Completed' AND rc_2_3 IS NOT NULL) AS `Same conclusion`,\n    (SELECT count(*) FROM applications WHERE ((panel_2_3 IN ('Full compliance', 'Substantial compliance') AND rc_2_3 IN ('Partial compliance', 'Non-compliance')) OR (panel_2_3 = 'Partial compliance' AND rc_2_3 = 'Non-compliance')) AND stage = '8. Completed' AND rc_2_3 IS NOT NULL) AS `Downgraded`,\n    (SELECT count(*) FROM applications WHERE ((panel_2_3 = 'Partial compliance' AND rc_2_3 = 'Compliance') OR (panel_2_3 = 'Non-Compliance' AND rc_2_3 IN ('Partial compliance', 'Compliance'))) AND stage = '8. Completed' AND rc_2_3 IS NOT NULL) AS `Upgraded`,\n    (SELECT count(*) FROM applications LEFT JOIN applicationClarification USING(aid) WHERE esg_2_3 = 1 AND stage = '8. Completed' AND rc_2_3 IS NOT NULL) AS `Clarifications`\n    UNION SELECT '2.4' AS `Standard`,\n    (SELECT count(*) FROM applications WHERE ((panel_2_4 = rc_2_4) OR (panel_2_4 IN ('Full compliance', 'Substantial compliance') AND rc_2_4 = 'Compliance')) AND stage = '8. Completed' AND rc_2_4 IS NOT NULL) AS `Same conclusion`,\n    (SELECT count(*) FROM applications WHERE ((panel_2_4 IN ('Full compliance', 'Substantial compliance') AND rc_2_4 IN ('Partial compliance', 'Non-compliance')) OR (panel_2_4 = 'Partial compliance' AND rc_2_4 = 'Non-compliance')) AND stage = '8. Completed' AND rc_2_4 IS NOT NULL) AS `Downgraded`,\n    (SELECT count(*) FROM applications WHERE ((panel_2_4 = 'Partial compliance' AND rc_2_4 = 'Compliance') OR (panel_2_4 = 'Non-Compliance' AND rc_2_4 IN ('Partial compliance', 'Compliance'))) AND stage = '8. Completed' AND rc_2_4 IS NOT NULL) AS `Upgraded`,\n    (SELECT count(*) FROM applications LEFT JOIN applicationClarification USING(aid) WHERE esg_2_4 = 1 AND stage = '8. Completed' AND rc_2_4 IS NOT NULL) AS `Clarifications`\n    UNION SELECT '2.5' AS `Standard`,\n    (SELECT count(*) FROM applications WHERE ((panel_2_5 = rc_2_5) OR (panel_2_5 IN ('Full compliance', 'Substantial compliance') AND rc_2_5 = 'Compliance')) AND stage = '8. Completed' AND rc_2_5 IS NOT NULL) AS `Same conclusion`,\n    (SELECT count(*) FROM applications WHERE ((panel_2_5 IN ('Full compliance', 'Substantial compliance') AND rc_2_5 IN ('Partial compliance', 'Non-compliance')) OR (panel_2_5 = 'Partial compliance' AND rc_2_5 = 'Non-compliance')) AND stage = '8. Completed' AND rc_2_5 IS NOT NULL) AS `Downgraded`,\n    (SELECT count(*) FROM applications WHERE ((panel_2_5 = 'Partial compliance' AND rc_2_5 = 'Compliance') OR (panel_2_5 = 'Non-Compliance' AND rc_2_5 IN ('Partial compliance', 'Compliance'))) AND stage = '8. Completed' AND rc_2_5 IS NOT NULL) AS `Upgraded`,\n    (SELECT count(*) FROM applications LEFT JOIN applicationClarification USING(aid) WHERE esg_2_5 = 1 AND stage = '8. Completed' AND rc_2_5 IS NOT NULL) AS `Clarifications`\n    UNION SELECT '2.6' AS `Standard`,\n    (SELECT count(*) FROM applications WHERE ((panel_2_6 = rc_2_6) OR (panel_2_6 IN ('Full compliance', 'Substantial compliance') AND rc_2_6 = 'Compliance')) AND stage = '8. Completed' AND rc_2_6 IS NOT NULL) AS `Same conclusion`,\n    (SELECT count(*) FROM applications WHERE ((panel_2_6 IN ('Full compliance', 'Substantial compliance') AND rc_2_6 IN ('Partial compliance', 'Non-compliance')) OR (panel_2_6 = 'Partial compliance' AND rc_2_6 = 'Non-compliance')) AND stage = '8. Completed' AND rc_2_6 IS NOT NULL) AS `Downgraded`,\n    (SELECT count(*) FROM applications WHERE ((panel_2_6 = 'Partial compliance' AND rc_2_6 = 'Compliance') OR (panel_2_6 = 'Non-Compliance' AND rc_2_6 IN ('Partial compliance', 'Compliance'))) AND stage = '8. Completed' AND rc_2_6 IS NOT NULL) AS `Upgraded`,\n    (SELECT count(*) FROM applications LEFT JOIN applicationClarification USING(aid) WHERE esg_2_6 = 1 AND stage = '8. Completed' AND rc_2_6 IS NOT NULL) AS `Clarifications`\n    UNION SELECT '2.7' AS `Standard`,\n    (SELECT count(*) FROM applications WHERE ((panel_2_7 = rc_2_7) OR (panel_2_7 IN ('Full compliance', 'Substantial compliance') AND rc_2_7 = 'Compliance')) AND stage = '8. Completed' AND rc_2_7 IS NOT NULL) AS `Same conclusion`,\n    (SELECT count(*) FROM applications WHERE ((panel_2_7 IN ('Full compliance', 'Substantial compliance') AND rc_2_7 IN ('Partial compliance', 'Non-compliance')) OR (panel_2_7 = 'Partial compliance' AND rc_2_7 = 'Non-compliance')) AND stage = '8. Completed' AND rc_2_7 IS NOT NULL) AS `Downgraded`,\n    (SELECT count(*) FROM applications WHERE ((panel_2_7 = 'Partial compliance' AND rc_2_7 = 'Compliance') OR (panel_2_7 = 'Non-Compliance' AND rc_2_7 IN ('Partial compliance', 'Compliance'))) AND stage = '8. Completed' AND rc_2_7 IS NOT NULL) AS `Upgraded`,\n    (SELECT count(*) FROM applications LEFT JOIN applicationClarification USING(aid) WHERE esg_2_7 = 1 AND stage = '8. Completed' AND rc_2_7 IS NOT NULL) AS `Clarifications`\n    UNION SELECT '3.1' AS `Standard`,\n    (SELECT count(*) FROM applications WHERE ((panel_3_1 = rc_3_1) OR (panel_3_1 IN ('Full compliance', 'Substantial compliance') AND rc_3_1 = 'Compliance')) AND stage = '8. Completed' AND rc_3_1 IS NOT NULL) AS `Same conclusion`,\n    (SELECT count(*) FROM applications WHERE ((panel_3_1 IN ('Full compliance', 'Substantial compliance') AND rc_3_1 IN ('Partial compliance', 'Non-compliance')) OR (panel_3_1 = 'Partial compliance' AND rc_3_1 = 'Non-compliance')) AND stage = '8. Completed' AND rc_3_1 IS NOT NULL) AS `Downgraded`,\n    (SELECT count(*) FROM applications WHERE ((panel_3_1 = 'Partial compliance' AND rc_3_1 = 'Compliance') OR (panel_3_1 = 'Non-Compliance' AND rc_3_1 IN ('Partial compliance', 'Compliance'))) AND stage = '8. Completed' AND rc_3_1 IS NOT NULL) AS `Upgraded`,\n    (SELECT count(*) FROM applications LEFT JOIN applicationClarification USING(aid) WHERE esg_3_1 = 1 AND stage = '8. Completed' AND rc_3_1 IS NOT NULL) AS `Clarifications`\n    UNION SELECT '3.2' AS `Standard`,\n    (SELECT count(*) FROM applications WHERE ((panel_3_2 = rc_3_2) OR (panel_3_2 IN ('Full compliance', 'Substantial compliance') AND rc_3_2 = 'Compliance')) AND stage = '8. Completed' AND rc_3_2 IS NOT NULL) AS `Same conclusion`,\n    (SELECT count(*) FROM applications WHERE ((panel_3_2 IN ('Full compliance', 'Substantial compliance') AND rc_3_2 IN ('Partial compliance', 'Non-compliance')) OR (panel_3_2 = 'Partial compliance' AND rc_3_2 = 'Non-compliance')) AND stage = '8. Completed' AND rc_3_2 IS NOT NULL) AS `Downgraded`,\n    (SELECT count(*) FROM applications WHERE ((panel_3_2 = 'Partial compliance' AND rc_3_2 = 'Compliance') OR (panel_3_2 = 'Non-Compliance' AND rc_3_2 IN ('Partial compliance', 'Compliance'))) AND stage = '8. Completed' AND rc_3_2 IS NOT NULL) AS `Upgraded`,\n    (SELECT count(*) FROM applications LEFT JOIN applicationClarification USING(aid) WHERE esg_3_2 = 1 AND stage = '8. Completed' AND rc_3_2 IS NOT NULL) AS `Clarifications`\n    UNION SELECT '3.3' AS `Standard`,\n    (SELECT count(*) FROM applications WHERE ((panel_3_3 = rc_3_3) OR (panel_3_3 IN ('Full compliance', 'Substantial compliance') AND rc_3_3 = 'Compliance')) AND stage = '8. Completed' AND rc_3_3 IS NOT NULL) AS `Same conclusion`,\n    (SELECT count(*) FROM applications WHERE ((panel_3_3 IN ('Full compliance', 'Substantial compliance') AND rc_3_3 IN ('Partial compliance', 'Non-compliance')) OR (panel_3_3 = 'Partial compliance' AND rc_3_3 = 'Non-compliance')) AND stage = '8. Completed' AND rc_3_3 IS NOT NULL) AS `Downgraded`,\n    (SELECT count(*) FROM applications WHERE ((panel_3_3 = 'Partial compliance' AND rc_3_3 = 'Compliance') OR (panel_3_3 = 'Non-Compliance' AND rc_3_3 IN ('Partial compliance', 'Compliance'))) AND stage = '8. Completed' AND rc_3_3 IS NOT NULL AND stage = '8. Completed' AND rc_3_3 IS NOT NULL) AS `Upgraded`,\n    (SELECT count(*) FROM applications LEFT JOIN applicationClarification USING(aid) WHERE esg_3_3 = 1) AS `Clarifications`\n    UNION SELECT '3.4' AS `Standard`,\n    (SELECT count(*) FROM applications WHERE ((panel_3_4 = rc_3_4) OR (panel_3_4 IN ('Full compliance', 'Substantial compliance') AND rc_3_4 = 'Compliance')) AND stage = '8. Completed' AND rc_3_4 IS NOT NULL) AS `Same conclusion`,\n    (SELECT count(*) FROM applications WHERE ((panel_3_4 IN ('Full compliance', 'Substantial compliance') AND rc_3_4 IN ('Partial compliance', 'Non-compliance')) OR (panel_3_4 = 'Partial compliance' AND rc_3_4 = 'Non-compliance')) AND stage = '8. Completed' AND rc_3_4 IS NOT NULL) AS `Downgraded`,\n    (SELECT count(*) FROM applications WHERE ((panel_3_4 = 'Partial compliance' AND rc_3_4 = 'Compliance') OR (panel_3_4 = 'Non-Compliance' AND rc_3_4 IN ('Partial compliance', 'Compliance'))) AND stage = '8. Completed' AND rc_3_4 IS NOT NULL) AS `Upgraded`,\n    (SELECT count(*) FROM applications LEFT JOIN applicationClarification USING(aid) WHERE esg_3_4 = 1 AND stage = '8. Completed' AND rc_3_4 IS NOT NULL) AS `Clarifications`\n    UNION SELECT '3.5' AS `Standard`,\n    (SELECT count(*) FROM applications WHERE ((panel_3_5 = rc_3_5) OR (panel_3_5 IN ('Full compliance', 'Substantial compliance') AND rc_3_5 = 'Compliance')) AND stage = '8. Completed' AND rc_3_5 IS NOT NULL) AS `Same conclusion`,\n    (SELECT count(*) FROM applications WHERE ((panel_3_5 IN ('Full compliance', 'Substantial compliance') AND rc_3_5 IN ('Partial compliance', 'Non-compliance')) OR (panel_3_5 = 'Partial compliance' AND rc_3_5 = 'Non-compliance')) AND stage = '8. Completed' AND rc_3_5 IS NOT NULL) AS `Downgraded`,\n    (SELECT count(*) FROM applications WHERE ((panel_3_5 = 'Partial compliance' AND rc_3_5 = 'Compliance') OR (panel_3_5 = 'Non-Compliance' AND rc_3_5 IN ('Partial compliance', 'Compliance'))) AND stage = '8. Completed' AND rc_3_5 IS NOT NULL) AS `Upgraded`,\n    (SELECT count(*) FROM applications LEFT JOIN applicationClarification USING(aid) WHERE esg_3_5 = 1 AND stage = '8. Completed' AND rc_3_5 IS NOT NULL) AS `Clarifications`\n    UNION SELECT '3.6' AS `Standard`,\n    (SELECT count(*) FROM applications WHERE ((panel_3_6 = rc_3_6) OR (panel_3_6 IN ('Full compliance', 'Substantial compliance') AND rc_3_6 = 'Compliance')) AND stage = '8. Completed' AND rc_3_6 IS NOT NULL) AS `Same conclusion`,\n    (SELECT count(*) FROM applications WHERE ((panel_3_6 IN ('Full compliance', 'Substantial compliance') AND rc_3_6 IN ('Partial compliance', 'Non-compliance')) OR (panel_3_6 = 'Partial compliance' AND rc_3_6 = 'Non-compliance')) AND stage = '8. Completed' AND rc_3_6 IS NOT NULL) AS `Downgraded`,\n    (SELECT count(*) FROM applications WHERE ((panel_3_6 = 'Partial compliance' AND rc_3_6 = 'Compliance') OR (panel_3_6 = 'Non-Compliance' AND rc_3_6 IN ('Partial compliance', 'Compliance'))) AND stage = '8. Completed' AND rc_3_6 IS NOT NULL) AS `Upgraded`,\n    (SELECT count(*) FROM applications LEFT JOIN applicationClarification USING(aid) WHERE esg_3_6 = 1 AND stage = '8. Completed' AND rc_3_6 IS NOT NULL) AS `Clarifications`"
    },
    "349171340f3a37793e81145f7169d6c8": {
      "name": "349171340f3a37793e81145f7169d6c8",
      "description": "External QA activity: by year and in/out ETER",
      "section": "query",
      "userQuery": "true",
      "saveQuery": "1",
      "isPublic": "1",
      "priKey": "_count",
      "searchable": 0,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "select if(year is null,'TOTAL',year) as Year,if(eter is null,'TOTAL',eter) as ETER,sum(amount) as reviews from agencyUpdate left join country on (country.iso3 = agencyUpdate.country) group by year,eter with rollup"
    },
    "37709adbd99f0bb1e4eaa622408b9420": {
      "name": "37709adbd99f0bb1e4eaa622408b9420",
      "description": "External QA activity: by country and types (search by year)",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "_count",
      "searchable": 1,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "SELECT\n  ehea, iso3, iso2, country,\n  GROUP_CONCAT(type ORDER BY amount DESC SEPARATOR ', ') AS types\nFROM (\n  SELECT\n    IF(country.ehea, 'EHEA', 'Non-EHEA') AS ehea,\n    country.iso3,\n    country.iso2,\n    country.infogram_name AS country,\n    CONCAT( agencyUpdate.type , ' ', SUM(agencyUpdate.amount) ) AS type,\n    SUM(agencyUpdate.amount) AS amount\n  FROM agencyUpdate\n  LEFT JOIN country ON ( agencyUpdate.country = country.iso3 )\n  LEFT JOIN registeredAgency USING(rid)\n  /* WHERE agencyUpdate.year = %s */\n  GROUP BY country.ehea, country.iso3, agencyUpdate.type\n) AS ungrouped\nGROUP BY ehea, iso3"
    },
    "377139ff1e50226a4ea3af718c2a4728": {
      "name": "377139ff1e50226a4ea3af718c2a4728",
      "description": "External QA activity: agencies active in CBQA (count)",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "_count",
      "searchable": 0,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "select\n  years.year,\n  (select count(distinct rid) from agencyUpdate where year = years.year) as `Active QAAs total`,\n  (select count(distinct rid) from agencyUpdate where year = years.year and agencyUpdate.crossborder ) as `QAAs with CBQA this year`,\n  (select count(distinct rid) from agencyUpdate where year <= years.year and agencyUpdate.crossborder ) as `QAAs with CBQA cumulative`,\n  (select group_concat( shortname order by shortname separator ', ') from registeredAgency where ( select count(*) from agencyUpdate where agencyUpdate.rid = registeredAgency.rid and agencyUpdate.crossborder and agencyUpdate.year = years.year ) = 0 and ( select count(*) from agencyUpdate where agencyUpdate.rid = registeredAgency.rid and agencyUpdate.crossborder and agencyUpdate.year < years.year ) > 0 ) as `QAAs with CBQA before but not this year`\nfrom ( select '2014' as year union select '2015' union select '2016' union select '2017' union select '2018' union select '2019') as years"
    },
    "3afb7194c3813539fac90538667593e4": {
      "name": "3afb7194c3813539fac90538667593e4",
      "description": "External QA activity: CB vs National year-by-year",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "_count",
      "searchable": 0,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "select agencyUpdate.year,\n    IF(agencyUpdate.crossborder=1,'Cross-border','National') as is_cb,\n   agencyUpdate.type , sum(amount) from agencyUpdate left join registeredAgency using(rid) group by year,is_cb,type with rollup"
    },
    "3b629741fd8283a78a9278d4eaafed41": {
      "name": "3b629741fd8283a78a9278d4eaafed41",
      "description": "External QA activity: table for Annual Report (search: year)",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "_count",
      "searchable": 1,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "SELECT\n country.iso3 ,\n country.name ,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '36' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `A3ES`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '1' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `AAC - DEVA`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '21' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `AAQ`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '45' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `ACPUA`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '3' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `ACQUIN`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '4' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `ACSUCYL`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '5' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `ACSUG`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '26' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `AEQES`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '7' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `AHPGS`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '2' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `AI`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '67' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `AIC`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '42' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `AKKORK`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '8' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `ANECA`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '48' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `ANQA`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '9' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `AQ Austria`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '10' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `AQAS`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '11' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `AQU`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '12' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `ARACIS`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '14' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `ASHE`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '13' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `ASIIN`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '37' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `BAC`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '15' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `CTI`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '71' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `CYQAA`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '63' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `EAEVE`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '28' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `EKKA`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '16' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `evalag`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '17' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `FIBAA`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '18' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `FINEEC`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '38' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `madri+d`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '66' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `HAC`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '6' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `HCERES`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '46' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `IAAR`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '31' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `IEP`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '47' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `IQAA`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '43' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `MusiQuE`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '70' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `NCEQE`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '41' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `NCPA`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '44' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `NEAA`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '29' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `NOKUT`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '20' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `NVAO`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '22' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `PKA`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '23' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `QAA`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '24' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `QANU`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '40' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `QQI`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '30' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `SKVC`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '19' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `SQAA`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '33' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `Unibasq`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '32' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `VLUHR QA`,\n( SELECT SUM(amount) FROM agencyUpdate WHERE rid = '25' AND agencyUpdate.country = country.iso3 /* AND year = %s */ ) AS `ZEvA`\nFROM country\nWHERE ehea\nORDER BY country.name \n"
    },
    "449ceecae13fab36564049676b4c14f5": {
      "name": "449ceecae13fab36564049676b4c14f5",
      "description": "Applications: compliance - table",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "_count",
      "searchable": 0,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "SELECT\n    CONCAT('A', applications.aid) AS `ID`,\n    registeredAgency.shortname AS `Agency`,\n    applications.type AS `Type`,\n    COALESCE(organisation.acronym, organisation.longname) AS `Coordinator`,\n    YEAR(applications.reportDate) AS `Report year`,\n    YEAR(applications.decisionDate) AS `Decision year`,\n    CASE rc_2_1 WHEN 'Compliance' THEN CASE panel_2_1 WHEN 'Full compliance' THEN 'FC = C' WHEN 'Substantial compliance' THEN 'SC = C' WHEN 'Partial compliance' THEN 'PC > C' WHEN 'Non-compliance' THEN 'NC > C' ELSE '?? - C' END WHEN 'Partial compliance' THEN CASE panel_2_1 WHEN 'Full compliance' THEN 'FC > PC' WHEN 'Substantial compliance' THEN 'SC > PC' WHEN 'Partial compliance' THEN 'PC = PC' WHEN 'Non-compliance' THEN 'NC > PC' ELSE '?? - PC' END WHEN 'Non-compliance' THEN CASE panel_2_1 WHEN 'Full compliance' THEN 'FC > NC' WHEN 'Substantial compliance' THEN 'FC > NC' WHEN 'Partial compliance' THEN 'PC > NC' WHEN 'Non-compliance' THEN 'NC = NC' ELSE '?? - NC' END END AS `ESG 2.1`,\n    CASE rc_2_2 WHEN 'Compliance' THEN CASE panel_2_2 WHEN 'Full compliance' THEN 'FC = C' WHEN 'Substantial compliance' THEN 'SC = C' WHEN 'Partial compliance' THEN 'PC > C' WHEN 'Non-compliance' THEN 'NC > C' ELSE '?? - C' END WHEN 'Partial compliance' THEN CASE panel_2_2 WHEN 'Full compliance' THEN 'FC > PC' WHEN 'Substantial compliance' THEN 'SC > PC' WHEN 'Partial compliance' THEN 'PC = PC' WHEN 'Non-compliance' THEN 'NC > PC' ELSE '?? - PC' END WHEN 'Non-compliance' THEN CASE panel_2_2 WHEN 'Full compliance' THEN 'FC > NC' WHEN 'Substantial compliance' THEN 'FC > NC' WHEN 'Partial compliance' THEN 'PC > NC' WHEN 'Non-compliance' THEN 'NC = NC' ELSE '?? - NC' END END AS `ESG 2.2`,\n    CASE rc_2_3 WHEN 'Compliance' THEN CASE panel_2_3 WHEN 'Full compliance' THEN 'FC = C' WHEN 'Substantial compliance' THEN 'SC = C' WHEN 'Partial compliance' THEN 'PC > C' WHEN 'Non-compliance' THEN 'NC > C' ELSE '?? - C' END WHEN 'Partial compliance' THEN CASE panel_2_3 WHEN 'Full compliance' THEN 'FC > PC' WHEN 'Substantial compliance' THEN 'SC > PC' WHEN 'Partial compliance' THEN 'PC = PC' WHEN 'Non-compliance' THEN 'NC > PC' ELSE '?? - PC' END WHEN 'Non-compliance' THEN CASE panel_2_3 WHEN 'Full compliance' THEN 'FC > NC' WHEN 'Substantial compliance' THEN 'FC > NC' WHEN 'Partial compliance' THEN 'PC > NC' WHEN 'Non-compliance' THEN 'NC = NC' ELSE '?? - NC' END END AS `ESG 2.3`,\n    CASE rc_2_4 WHEN 'Compliance' THEN CASE panel_2_4 WHEN 'Full compliance' THEN 'FC = C' WHEN 'Substantial compliance' THEN 'SC = C' WHEN 'Partial compliance' THEN 'PC > C' WHEN 'Non-compliance' THEN 'NC > C' ELSE '?? - C' END WHEN 'Partial compliance' THEN CASE panel_2_4 WHEN 'Full compliance' THEN 'FC > PC' WHEN 'Substantial compliance' THEN 'SC > PC' WHEN 'Partial compliance' THEN 'PC = PC' WHEN 'Non-compliance' THEN 'NC > PC' ELSE '?? - PC' END WHEN 'Non-compliance' THEN CASE panel_2_4 WHEN 'Full compliance' THEN 'FC > NC' WHEN 'Substantial compliance' THEN 'FC > NC' WHEN 'Partial compliance' THEN 'PC > NC' WHEN 'Non-compliance' THEN 'NC = NC' ELSE '?? - NC' END END AS `ESG 2.4`,\n    CASE rc_2_5 WHEN 'Compliance' THEN CASE panel_2_5 WHEN 'Full compliance' THEN 'FC = C' WHEN 'Substantial compliance' THEN 'SC = C' WHEN 'Partial compliance' THEN 'PC > C' WHEN 'Non-compliance' THEN 'NC > C' ELSE '?? - C' END WHEN 'Partial compliance' THEN CASE panel_2_5 WHEN 'Full compliance' THEN 'FC > PC' WHEN 'Substantial compliance' THEN 'SC > PC' WHEN 'Partial compliance' THEN 'PC = PC' WHEN 'Non-compliance' THEN 'NC > PC' ELSE '?? - PC' END WHEN 'Non-compliance' THEN CASE panel_2_5 WHEN 'Full compliance' THEN 'FC > NC' WHEN 'Substantial compliance' THEN 'FC > NC' WHEN 'Partial compliance' THEN 'PC > NC' WHEN 'Non-compliance' THEN 'NC = NC' ELSE '?? - NC' END END AS `ESG 2.5`,\n    CASE rc_2_6 WHEN 'Compliance' THEN CASE panel_2_6 WHEN 'Full compliance' THEN 'FC = C' WHEN 'Substantial compliance' THEN 'SC = C' WHEN 'Partial compliance' THEN 'PC > C' WHEN 'Non-compliance' THEN 'NC > C' ELSE '?? - C' END WHEN 'Partial compliance' THEN CASE panel_2_6 WHEN 'Full compliance' THEN 'FC > PC' WHEN 'Substantial compliance' THEN 'SC > PC' WHEN 'Partial compliance' THEN 'PC = PC' WHEN 'Non-compliance' THEN 'NC > PC' ELSE '?? - PC' END WHEN 'Non-compliance' THEN CASE panel_2_6 WHEN 'Full compliance' THEN 'FC > NC' WHEN 'Substantial compliance' THEN 'FC > NC' WHEN 'Partial compliance' THEN 'PC > NC' WHEN 'Non-compliance' THEN 'NC = NC' ELSE '?? - NC' END END AS `ESG 2.6`,\n    CASE rc_2_7 WHEN 'Compliance' THEN CASE panel_2_7 WHEN 'Full compliance' THEN 'FC = C' WHEN 'Substantial compliance' THEN 'SC = C' WHEN 'Partial compliance' THEN 'PC > C' WHEN 'Non-compliance' THEN 'NC > C' ELSE '?? - C' END WHEN 'Partial compliance' THEN CASE panel_2_7 WHEN 'Full compliance' THEN 'FC > PC' WHEN 'Substantial compliance' THEN 'SC > PC' WHEN 'Partial compliance' THEN 'PC = PC' WHEN 'Non-compliance' THEN 'NC > PC' ELSE '?? - PC' END WHEN 'Non-compliance' THEN CASE panel_2_7 WHEN 'Full compliance' THEN 'FC > NC' WHEN 'Substantial compliance' THEN 'FC > NC' WHEN 'Partial compliance' THEN 'PC > NC' WHEN 'Non-compliance' THEN 'NC = NC' ELSE '?? - NC' END END AS `ESG 2.7`,\n    CASE rc_3_1 WHEN 'Compliance' THEN CASE panel_3_1 WHEN 'Full compliance' THEN 'FC = C' WHEN 'Substantial compliance' THEN 'SC = C' WHEN 'Partial compliance' THEN 'PC > C' WHEN 'Non-compliance' THEN 'NC > C' ELSE '?? - C' END WHEN 'Partial compliance' THEN CASE panel_3_1 WHEN 'Full compliance' THEN 'FC > PC' WHEN 'Substantial compliance' THEN 'SC > PC' WHEN 'Partial compliance' THEN 'PC = PC' WHEN 'Non-compliance' THEN 'NC > PC' ELSE '?? - PC' END WHEN 'Non-compliance' THEN CASE panel_3_1 WHEN 'Full compliance' THEN 'FC > NC' WHEN 'Substantial compliance' THEN 'FC > NC' WHEN 'Partial compliance' THEN 'PC > NC' WHEN 'Non-compliance' THEN 'NC = NC' ELSE '?? - NC' END END AS `ESG 3.1`,\n    CASE rc_3_2 WHEN 'Compliance' THEN CASE panel_3_2 WHEN 'Full compliance' THEN 'FC = C' WHEN 'Substantial compliance' THEN 'SC = C' WHEN 'Partial compliance' THEN 'PC > C' WHEN 'Non-compliance' THEN 'NC > C' ELSE '?? - C' END WHEN 'Partial compliance' THEN CASE panel_3_2 WHEN 'Full compliance' THEN 'FC > PC' WHEN 'Substantial compliance' THEN 'SC > PC' WHEN 'Partial compliance' THEN 'PC = PC' WHEN 'Non-compliance' THEN 'NC > PC' ELSE '?? - PC' END WHEN 'Non-compliance' THEN CASE panel_3_2 WHEN 'Full compliance' THEN 'FC > NC' WHEN 'Substantial compliance' THEN 'FC > NC' WHEN 'Partial compliance' THEN 'PC > NC' WHEN 'Non-compliance' THEN 'NC = NC' ELSE '?? - NC' END END AS `ESG 3.2`,\n    CASE rc_3_3 WHEN 'Compliance' THEN CASE panel_3_3 WHEN 'Full compliance' THEN 'FC = C' WHEN 'Substantial compliance' THEN 'SC = C' WHEN 'Partial compliance' THEN 'PC > C' WHEN 'Non-compliance' THEN 'NC > C' ELSE '?? - C' END WHEN 'Partial compliance' THEN CASE panel_3_3 WHEN 'Full compliance' THEN 'FC > PC' WHEN 'Substantial compliance' THEN 'SC > PC' WHEN 'Partial compliance' THEN 'PC = PC' WHEN 'Non-compliance' THEN 'NC > PC' ELSE '?? - PC' END WHEN 'Non-compliance' THEN CASE panel_3_3 WHEN 'Full compliance' THEN 'FC > NC' WHEN 'Substantial compliance' THEN 'FC > NC' WHEN 'Partial compliance' THEN 'PC > NC' WHEN 'Non-compliance' THEN 'NC = NC' ELSE '?? - NC' END END AS `ESG 3.3`,\n    CASE rc_3_4 WHEN 'Compliance' THEN CASE panel_3_4 WHEN 'Full compliance' THEN 'FC = C' WHEN 'Substantial compliance' THEN 'SC = C' WHEN 'Partial compliance' THEN 'PC > C' WHEN 'Non-compliance' THEN 'NC > C' ELSE '?? - C' END WHEN 'Partial compliance' THEN CASE panel_3_4 WHEN 'Full compliance' THEN 'FC > PC' WHEN 'Substantial compliance' THEN 'SC > PC' WHEN 'Partial compliance' THEN 'PC = PC' WHEN 'Non-compliance' THEN 'NC > PC' ELSE '?? - PC' END WHEN 'Non-compliance' THEN CASE panel_3_4 WHEN 'Full compliance' THEN 'FC > NC' WHEN 'Substantial compliance' THEN 'FC > NC' WHEN 'Partial compliance' THEN 'PC > NC' WHEN 'Non-compliance' THEN 'NC = NC' ELSE '?? - NC' END END AS `ESG 3.4`,\n    CASE rc_3_5 WHEN 'Compliance' THEN CASE panel_3_5 WHEN 'Full compliance' THEN 'FC = C' WHEN 'Substantial compliance' THEN 'SC = C' WHEN 'Partial compliance' THEN 'PC > C' WHEN 'Non-compliance' THEN 'NC > C' ELSE '?? - C' END WHEN 'Partial compliance' THEN CASE panel_3_5 WHEN 'Full compliance' THEN 'FC > PC' WHEN 'Substantial compliance' THEN 'SC > PC' WHEN 'Partial compliance' THEN 'PC = PC' WHEN 'Non-compliance' THEN 'NC > PC' ELSE '?? - PC' END WHEN 'Non-compliance' THEN CASE panel_3_5 WHEN 'Full compliance' THEN 'FC > NC' WHEN 'Substantial compliance' THEN 'FC > NC' WHEN 'Partial compliance' THEN 'PC > NC' WHEN 'Non-compliance' THEN 'NC = NC' ELSE '?? - NC' END END AS `ESG 3.5`,\n    CASE rc_3_6 WHEN 'Compliance' THEN CASE panel_3_6 WHEN 'Full compliance' THEN 'FC = C' WHEN 'Substantial compliance' THEN 'SC = C' WHEN 'Partial compliance' THEN 'PC > C' WHEN 'Non-compliance' THEN 'NC > C' ELSE '?? - C' END WHEN 'Partial compliance' THEN CASE panel_3_6 WHEN 'Full compliance' THEN 'FC > PC' WHEN 'Substantial compliance' THEN 'SC > PC' WHEN 'Partial compliance' THEN 'PC = PC' WHEN 'Non-compliance' THEN 'NC > PC' ELSE '?? - PC' END WHEN 'Non-compliance' THEN CASE panel_3_6 WHEN 'Full compliance' THEN 'FC > NC' WHEN 'Substantial compliance' THEN 'FC > NC' WHEN 'Partial compliance' THEN 'PC > NC' WHEN 'Non-compliance' THEN 'NC = NC' ELSE '?? - NC' END END AS `ESG 3.6`\n    FROM applications\n    LEFT JOIN registeredAgency USING(rid)\n    LEFT JOIN organisation ON organisation.oid = applications.coordinator\n    WHERE stage = '8. Completed' AND aid > 25"
    },
    "44d90afa1715deb1ea1806c996f5ed5c": {
      "name": "44d90afa1715deb1ea1806c996f5ed5c",
      "description": "External QA activity: by year and agency (all)",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "_count",
      "searchable": 0,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "select\n  registeredAgency.shortname AS Agency ,\n  agencyUpdate.year,\n  registeredAgency.basecountry,\n  group_concat( distinct country.name order by country.name separator ', ') AS Countries ,\n  group_concat(distinct agencyUpdate.type separator ', ') AS Types,\n  sum( agencyUpdate.amount ) AS Reviews\nFROM\n  agencyUpdate,\n  registeredAgency,\n  country\nWHERE\n  registeredAgency.rid=agencyUpdate.rid AND\n  country.iso3=agencyUpdate.country\nGROUP BY\n  registeredAgency.rid , agencyUpdate.year\nORDER BY\n  registeredAgency.shortname"
    },
    "453b36fd0b629fc0b4c8c5e3e7185d44": {
      "name": "453b36fd0b629fc0b4c8c5e3e7185d44",
      "description": "Applications: number of reviews by coordinator",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "_count",
      "searchable": 0,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "SELECT organisation.oid, organisation.name AS Coordinator, COUNT(applications.aid) AS Reviews FROM applications LEFT JOIN organisation ON (organisation.oid = applications.coordinator) GROUP BY applications.coordinator ORDER BY Reviews DESC"
    },
    "4a9b37175409d9e230337b1b417a16d4": {
      "name": "4a9b37175409d9e230337b1b417a16d4",
      "description": "Applications: details incl. clarification requests",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "aid",
      "searchable": 0,
      "underlyingTable": "applications",
      "templates": [],
      "allowNew": true,
      "allowEdit": true,
      "allowDelete": false,
      "sql": "SELECT applications.aid AS id, applications.selectName, applications.submitDate, applications.type, applications.reportDate, applications.reportSubmitted, applications.panel_2_1, applications.rapp_2_1, applications.rc_2_1, applications.panel_2_2, applications.rapp_2_2, applications.rc_2_2, applications.panel_2_3, applications.rapp_2_3, applications.rc_2_3, applications.panel_2_4, applications.rapp_2_4, applications.rc_2_4, applications.panel_2_5, applications.rapp_2_5, applications.rc_2_5, applications.panel_2_6, applications.rapp_2_6, applications.rc_2_6, applications.panel_2_7, applications.rapp_2_7, applications.rc_2_7, applications.panel_3_1, applications.rapp_3_1, applications.rc_3_1, applications.panel_3_2, applications.rapp_3_2, applications.rc_3_2, applications.panel_3_3, applications.rapp_3_3, applications.rc_3_3, applications.panel_3_4, applications.rapp_3_4, applications.rc_3_4, applications.panel_3_5, applications.rapp_3_5, applications.rc_3_5, applications.panel_3_6, applications.rapp_3_6, applications.rc_3_6, applications.result, applications.decisionDate, applications.comment, applicationClarification.type as clarification_type, applicationClarification.sentOn, applicationClarification.replyOn, applicationClarification.esg_2_1, applicationClarification.esg_2_2, applicationClarification.esg_2_3, applicationClarification.esg_2_4, applicationClarification.esg_2_5, applicationClarification.esg_2_6, applicationClarification.esg_2_7, applicationClarification.esg_3_1, applicationClarification.esg_3_2, applicationClarification.esg_3_3, applicationClarification.esg_3_4, applicationClarification.esg_3_5, applicationClarification.esg_3_6, applicationClarification.notes FROM applications left join applicationClarification using(aid) WHERE stage = '8. Completed' AND aid > 25 ORDER BY aid"
    },
    "4d117f53190dcd43f164b896c3c3b877": {
      "name": "4d117f53190dcd43f164b896c3c3b877",
      "description": "Rapporteurs: assignments current term (2021-2023)",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "cid",
      "searchable": 0,
      "underlyingTable": "contact",
      "templates": [],
      "allowNew": true,
      "allowEdit": true,
      "allowDelete": true,
      "sql": "select\n  contact.person,\n  count(distinct app_all.aid) as count_all,\n  group_concat(distinct qaa_all.shortname separator', ') as applications_all,\n  count(distinct app_open.aid) as count_open,\n  group_concat(distinct qaa_open.shortname separator', ') as applications_open,\n  count(distinct app_3rd.aid) as count_3rd,\n  group_concat(distinct qaa_3rd.shortname separator', ') as applications_3rd,\n  count(distinct changeReport.crid) as count_change_reports,\n  group_concat(distinct qaa_scr.shortname separator', ') as change_reports,\n  contact.cid AS id\n\nfrom contact \n\nleft join contact_organisation using(cid)\n\nleft join applications as app_all on (\n (\n   app_all.rapporteur1=contact.cid or\n   app_all.rapporteur2=contact.cid or\n   app_all.rapporteur3=contact.cid\n ) \n and\n (\n   (\n     (\n       app_all.stage = '8. Completed' or\n       app_all.stage = '-- Withdrawn' \n     ) and (\n       app_all.decisiondate >= '2021-07-15'\n     ) and (\n       app_all.decisiondate < '2023-07-01'\n     )\n   )\n   or\n   not (\n     app_all.stage = '8. Completed' or\n     app_all.stage = '-- Withdrawn' \n   )\n )\n)\n\nleft join registeredAgency as qaa_all on (qaa_all.rid = app_all.rid)\n\nleft join applications as app_open on (\n ( app_open.rapporteur1=contact.cid or\n   app_open.rapporteur2=contact.cid\n ) and not (\n   app_open.stage = '8. Completed' or\n   app_open.stage = '-- Withdrawn' \n )\n)\n\nleft join registeredAgency as qaa_open on (qaa_open.rid = app_open.rid)\n\nleft join applications as app_3rd on (\n   app_3rd.rapporteur3=contact.cid\n   and not (\n   app_3rd.stage = '8. Completed' or\n   app_3rd.stage = '-- Withdrawn' \n )\n)\n\nleft join registeredAgency as qaa_3rd on (qaa_3rd.rid = app_3rd.rid)\n\nleft join changeReport on (\n  (\n    (\n      changeReport.decisiondate >= '2021-07-15' and\n      changeReport.decisiondate < '2023-07-01'\n    )\n    or\n    (\n      changeReport.stage < '4. Completed'\n    )\n  ) and (\n    changeReport.rapporteur1=contact.cid or\n    changeReport.rapporteur2=contact.cid\n  )\n)\n\nleft join registeredAgency as qaa_scr on (\n  qaa_scr.rid = changeReport.rid\n)\n\nwhere\n  app_all.aid\nor\n  app_open.aid\nor\n  app_3rd.aid\nor\n  changeReport.crid\nor\n  (\n    contact_organisation.oid = '48'\n  and\n    contact_organisation.function like 'RC%%'\n  )\n\ngroup by contact.cid\n\norder by contact.person\n"
    },
    "4f05658db1c10ceaf10264f6bd04e1b0": {
      "name": "4f05658db1c10ceaf10264f6bd04e1b0",
      "description": "Applications: decided 2018",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "_count",
      "searchable": 0,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "select applications.aid, registeredAgency.shortname, applications.type, applications.submitdate, applications.reportdate, applications.decisiondate, applications.result from applications left join registeredAgency using(rid) where (decisiondate between '2018-01-01' and '2018-12-31')"
    },
    "5113d3344e522942b1fff031b9ad34e0": {
      "name": "5113d3344e522942b1fff031b9ad34e0",
      "description": "Applications: open",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "aid",
      "searchable": 1,
      "underlyingTable": "applications",
      "templates": [],
      "allowNew": true,
      "allowEdit": true,
      "allowDelete": false,
      "sql": "select applications.aid AS id, registeredAgency.shortname AS Applicant, applications.submitDate AS 'Submitted on', applications.type AS Type, applications.stage AS Stage, IF(applications.stage = '2. Waiting report', applications.reportexpected ,NULL) AS 'Report expected', concat(r1.person,', ',r2.person) AS Rapporteurs, r3.person AS '3rd rapporteur', sec.person AS Secretary from applications\nleft join registeredAgency using(rid)\nleft join organisation using(oid)\nleft join contact as r1 on (r1.cid = applications.rapporteur1)\nleft join contact as r2 on (r2.cid = applications.rapporteur2)\nleft join contact as r3 on (r3.cid = applications.rapporteur3)\nleft join contact as sec on (sec.cid = applications.secretary)\nwhere stage < '8. Completed' and stage != '-- Withdrawn' /* and sec.person like %s */ order by stage desc, reportexpected"
    },
    "67b85ed2b76b1c20446a7143098757a9": {
      "name": "67b85ed2b76b1c20446a7143098757a9",
      "description": "Applications: review panel members, country aggregates",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "_count",
      "searchable": 0,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "SELECT cc AS ISO2, country.name AS Country, COUNT(DISTINCT cid) AS Persons, SUM(reviews) AS Reviews, SUM(reviews) / COUNT(DISTINCT cid) AS Average FROM (SELECT cid, contact.nameEmail AS person, COALESCE(contact.country, MAX(organisation.country), UPPER(REPLACE(REGEXP_REPLACE(contact.email,'.*\\\\.([A-Za-z])\\\\s*', '\\\\1'),'uk','GB')), 'unknown') AS cc, COUNT(DISTINCT arid) AS reviews FROM applicationRole LEFT JOIN contact USING(cid) LEFT JOIN contact_organisation USING(cid) LEFT JOIN organisation USING(oid) WHERE applicationRole.role  != 'Coordinator' GROUP BY cid) AS reviewers LEFT JOIN country ON country.iso2 = reviewers.cc GROUP BY cc"
    },
    "67dae13bc6f6514a702f52bad3fe2d5e": {
      "name": "67dae13bc6f6514a702f52bad3fe2d5e",
      "description": "DEQAR: list non-partner agencies",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "rid",
      "searchable": 0,
      "underlyingTable": "registeredAgency",
      "templates": [],
      "allowNew": true,
      "allowEdit": true,
      "allowDelete": false,
      "sql": "SELECT\n registeredAgency.rid AS id,\n registeredAgency.shortname AS acronym,\n organisation.name AS agency,\n group_concat(contact.person separator ', ') AS contacts,\n group_concat(contact.email separator ', ') AS emails,\n group_concat(contact.phone separator ', ') AS phones,\n group_concat(contact.mobile separator ', ') AS mobiles,\n organisation.address1,\n organisation.address2,\n organisation.postcode,\n organisation.city,\n country.name AS country\nFROM\n registeredAgency\nLEFT JOIN\n organisation USING (oid)\nLEFT JOIN\n deqarPartner USING (oid)\nLEFT JOIN\n contact_organisation USING (oid)\nLEFT JOIN\n contact USING (cid)\nLEFT JOIN\n country ON (country.iso2 = organisation.country)\nWHERE\n registeredAgency.registered\n AND deqarPartner.pid IS NULL\n AND contact_organisation.senddeqar \nGROUP BY\n registeredAgency.rid"
    },
    "74d9ca9497dcfc6569bbb8ce9376ea32": {
      "name": "74d9ca9497dcfc6569bbb8ce9376ea32",
      "description": "Agencies: contact list",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "_count",
      "searchable": 0,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "select\n  shortname,\n  organisation.longname,\n  contact.person as main_contact,\n  contact.email as main_email,\n  (select group_concat(contact.email SEPARATOR ', ') from contact_organisation left join contact using(cid) where contact_organisation.oid = organisation.oid and contact_organisation.sendofficial and (registeredAgency.mainContact IS NULL OR contact_organisation.cid != registeredAgency.mainContact)) as cc_emails,\n  organisation.address1 ,\n  organisation.address2 , \n  organisation.postcode,\n  organisation.city,\n  country.name AS country\nfrom\n  organisation\nleft join registeredAgency using(oid)\nleft join contact on contact.cid = registeredAgency.mainContact \nleft join country on country.iso2 = organisation.country\nwhere\n  registeredAgency.rid is not null\norder by registered desc, shortname"
    },
    "7b1c26afa39cdb6e93f999aa3446e568": {
      "name": "7b1c26afa39cdb6e93f999aa3446e568",
      "description": "DEQAR CONNECT: contact list",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "pid",
      "searchable": 0,
      "underlyingTable": "deqarConnectPartner",
      "templates": [],
      "allowNew": true,
      "allowEdit": true,
      "allowDelete": true,
      "sql": "SELECT\n  deqarConnectPartner.pid AS id,\n  COALESCE(organisation.acronym, organisation.longname) AS partner,\n  deqarConnectPartner.type AS partner_role,\n  contact_technical.person AS contact_technical,\n  contact_technical.email AS email_technical,\n  contact_technical.phone AS phone_technical,\n  contact_technical.mobile AS mobile_technical,\n  GROUP_CONCAT(distinct contact_technical_cc.nameEmail SEPARATOR ', ' ) AS cc_technical,\n  contact_admin.person AS contact_admin,\n  contact_admin.email AS email_admin,\n  contact_admin.phone AS phone_admin,\n  contact_admin.mobile AS mobile_admin,\n  GROUP_CONCAT(distinct contact_admin_cc.nameEmail SEPARATOR ', ' ) AS cc_admin\nFROM deqarConnectPartner\nLEFT JOIN organisation USING(oid)\nLEFT JOIN contact_organisation USING(oid)\nLEFT JOIN contact AS contact_technical ON ( contact_technical.cid = deqarConnectPartner.contact_technical )\nLEFT JOIN contact AS contact_technical_cc ON ( contact_technical_cc.cid != COALESCE(deqarConnectPartner.contact_technical, 0) AND ( contact_technical_cc.cid = contact_organisation.cid ) AND contact_organisation.senddeqar ) \nLEFT JOIN contact AS contact_admin ON ( contact_admin.cid = deqarConnectPartner.contact_admin )\nLEFT JOIN contact AS contact_admin_cc ON ( contact_admin_cc.cid != COALESCE(deqarConnectPartner.contact_admin, 0) AND ( contact_admin_cc.cid = contact_organisation.cid ) AND contact_organisation.senddeqar ) \nGROUP BY deqarConnectPartner.pid"
    },
    "812c1767741cf4df19c0cad535a621be": {
      "name": "812c1767741cf4df19c0cad535a621be",
      "description": "DEQAR CONNECT: partner emails",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "_count",
      "searchable": 0,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "SELECT\n  deqarConnectPartner.type AS partner_role,\n  count(distinct deqarConnectPartner.pid ) AS partners,\n  GROUP_CONCAT(distinct contact_technical.email SEPARATOR ', ' ) AS emails_technical,\n  GROUP_CONCAT(distinct contact_technical_cc.email SEPARATOR ', ' ) AS cc_technical,\n  GROUP_CONCAT(distinct contact_admin.email SEPARATOR ', ' ) AS emails_admin,\n  GROUP_CONCAT(distinct contact_admin_cc.email SEPARATOR ', ' ) AS cc_admin\nFROM deqarConnectPartner\nLEFT JOIN contact_organisation USING(oid)\nLEFT JOIN contact AS contact_technical ON ( contact_technical.cid = deqarConnectPartner.contact_technical )\nLEFT JOIN contact AS contact_technical_cc ON ( contact_technical_cc.cid != COALESCE(deqarConnectPartner.contact_technical, 0) AND ( contact_technical_cc.cid = contact_organisation.cid ) AND contact_organisation.senddeqar ) OR contact_technical_cc.cid = deqarConnectPartner.contact_admin\nLEFT JOIN contact AS contact_admin ON ( contact_admin.cid = deqarConnectPartner.contact_admin )\nLEFT JOIN contact AS contact_admin_cc ON ( contact_admin_cc.cid != COALESCE(deqarConnectPartner.contact_admin, 0) AND ( contact_admin_cc.cid = contact_organisation.cid ) AND contact_organisation.senddeqar ) OR contact_admin_cc.cid = deqarConnectPartner.contact_technical\nGROUP BY deqarConnectPartner.type"
    },
    "8d1eb1a8cfe97fc1a5161443b3658398": {
      "name": "8d1eb1a8cfe97fc1a5161443b3658398",
      "description": "Applications: open (list for website)",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "_count",
      "searchable": 0,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "select\n  applications.aid,\n  registeredAgency.shortname,\n  applications.submitdate, applications.stage,\n  applications.eligibilitydate ,\n  applications.reportexpected ,\n  applications.type,\n  coordinator.acronym as coordinator,\n  concat('<li>',registeredAgency.shortname,' &ndash; ',organisation.longname,', application A',applications.aid,' of ',applications.submitdate,', ',applications.type,', review coordinated by ',coalesce(coordinator.acronym, coordinator.longname),'</li>') as web_entry\nfrom applications\nleft join registeredAgency using(rid)\nleft join organisation using(oid)\nleft join organisation as coordinator on (coordinator.oid  = applications.coordinator )\nwhere stage < '8. Completed' and stage != '-- Withdrawn' order by stage desc, reportexpected"
    },
    "91ae1f72aaed0c6517d373df21afba6e": {
      "name": "91ae1f72aaed0c6517d373df21afba6e",
      "description": "Export for Octopus",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "_count",
      "searchable": 0,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "SELECT  'A'                                                                     AS Actied,\n        octopusAccount.octopusId                                                AS Id,\n        octopusAccount.oaid                                                     AS `Extern relatienummer`,\n        octopusAccount.name                                                     AS Naam,\n        IF( LENGTH(octopusAccount.contact) > 0,\n                octopusAccount.contact,\n                IF( octopusAccount.cid IS NOT NULL,\n                        main_contact.person,\n                        '' ) )                                                  AS `Contactpersoon`,\n        CONCAT( organisation.address1 ,\n                IF(organisation.address2 IS NULL,\n                        '',\n                        CONCAT(' / ', organisation.address2) ) )                AS `Straat en nummer`,\n        organisation.postcode                                                   AS Postcode,\n        organisation.city                                                       AS Gemeente,\n        organisation.country                                                    AS Land,\n        CONCAT( 'EQAR-DB - last auto update: ', CAST(CURDATE() AS CHAR),\n                ' - DO NOT CHANGE IN OCTOPUS!' )                                AS Opmerkingen,\n        IF( octopusAccount.client, 'JA', '')                                    AS Klant,\n        GROUP_CONCAT(DISTINCT email_contacts.email SEPARATOR ', ')              AS Email,\n        registeredAgency.registerUrl                                            AS Url,\n        octopusAccount.oaid                                                     AS `Zoekveld 1`,\n        CONCAT( organisation.country, ' [iso2]' )                               AS `Zoekveld 2`,\n        '2'                                                                     AS Taal,\n        '30'                                                                    AS Vervaldagen,\n        'na factuur datum'                                                      AS `Vervaldatum type`,\n        octopusAccount.oaid                                                     AS `EQAR oaid`,\n        organisation.oid                                                        AS `EQAR oid`,\n        member.mid                                                              AS `EQAR mid`,\n        registeredAgency.rid                                                    AS `EQAR rid`,\n        main_contact.cid                                                        AS `EQAR main cid`\nFROM    octopusAccount\nLEFT JOIN organisation USING ( oid )\nLEFT JOIN registeredAgency USING ( oaid )                                                                                                                           LEFT JOIN invoice USING ( oaid )                                                                                                                                    LEFT JOIN member USING ( mid )                                                                                                                                    \nLEFT JOIN contact_organisation ON ( contact_organisation.oid = octopusAccount.oid )\nLEFT JOIN contact AS email_contacts ON ( email_contacts.cid = octopusAccount.cid OR ( email_contacts.cid = contact_organisation.cid AND contact_organisation.sendinvoice ) )\nLEFT JOIN contact AS main_contact ON ( main_contact.cid = octopusAccount.cid )\nGROUP BY octopusAccount.oaid"
    },
    "92dc972947e11093e211f7ec8b388820": {
      "name": "92dc972947e11093e211f7ec8b388820",
      "description": "External QA activity: CB by agency and year (sum)",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "_count",
      "searchable": 0,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "select\n  registeredAgency.shortname as Agency,\n  (select count(uid) from agencyUpdate where agencyUpdate.rid = registeredAgency.rid and crossBorder and year ='2014') AS c2014 ,\n  (select count(uid) from agencyUpdate where agencyUpdate.rid = registeredAgency.rid and crossBorder and year ='2015') AS c2015 ,\n  (select count(uid) from agencyUpdate where agencyUpdate.rid = registeredAgency.rid and crossBorder and year ='2016') AS c2016 ,\n  (select count(uid) from agencyUpdate where agencyUpdate.rid = registeredAgency.rid and crossBorder and year ='2017') AS c2017 ,\n  (select count(uid) from agencyUpdate where agencyUpdate.rid = registeredAgency.rid and crossBorder and year ='2018') AS c2018 ,\n  (select count(uid) from agencyUpdate where agencyUpdate.rid = registeredAgency.rid and crossBorder and year ='2019') AS c2019\nfrom registeredAgency having ( (c2014>0) or (c2015>0) or (c2016>0) or (c2017>0) or (c2018>0) or (c2019>0))"
    },
    "9d6e325a844549f5064665d232bdf199": {
      "name": "9d6e325a844549f5064665d232bdf199",
      "description": "External QA activity: CB by agency and year (detail)",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "_count",
      "searchable": 1,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "select\n  registeredAgency.shortname,\n  agencyUpdate.year,\n  agencyUpdate.type,\n  sum(agencyUpdate.amount) as amount\nfrom agencyUpdate\nleft join registeredAgency using(rid)\nwhere agencyUpdate.crossborder /* and agencyUpdate.year = %s */\ngroup by shortname,year,type with rollup"
    },
    "a10cb853b98d487c3e93c29709671e53": {
      "name": "a10cb853b98d487c3e93c29709671e53",
      "description": "Applications: decided 2020",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "_count",
      "searchable": 0,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "select applications.aid, registeredAgency.shortname, applications.type, applications.submitdate, applications.reportdate, applications.decisiondate, applications.result from applications left join registeredAgency using(rid) where (decisiondate between '2020-01-01' and '2020-12-31')"
    },
    "a5e8abe7476634efe4b1a638b09ab71a": {
      "name": "a5e8abe7476634efe4b1a638b09ab71a",
      "description": "EQAR members: email addresses",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "_count",
      "searchable": 0,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "SELECT member.cat, GROUP_CONCAT(contact.email ORDER BY member.name SEPARATOR ', ') AS emails FROM member LEFT JOIN contact_organisation USING ( oid ) LEFT JOIN contact USING(cid) WHERE contact_organisation.sendofficial = 1 GROUP BY member.cat ORDER BY member.cat ASC"
    },
    "a9d7a503ba9370c393b96d684e6b08cc": {
      "name": "a9d7a503ba9370c393b96d684e6b08cc",
      "description": "Agencies: by country",
      "section": "query",
      "userQuery": "true",
      "saveQuery": "1",
      "isPublic": "1",
      "priKey": "_count",
      "searchable": 0,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "select country.name AS Country,count(rid) AS count,group_concat(shortname) AS Agencies from registeredAgency left join country on (country.iso3=registeredAgency.basecountry) where registered group by basecountry"
    },
    "aac97b915bea74a317430e136963397b": {
      "name": "aac97b915bea74a317430e136963397b",
      "description": "External QA activity: by agency and types (search by year)",
      "section": "query",
      "userQuery": "true",
      "saveQuery": "1",
      "isPublic": "1",
      "priKey": "rid",
      "searchable": 1,
      "underlyingTable": "registeredAgency",
      "templates": [],
      "allowNew": true,
      "allowEdit": true,
      "allowDelete": false,
      "sql": "SELECT\n   registeredAgency.rid AS id,\n   registeredAgency.shortname,\n   (SELECT SUM(amount) FROM agencyUpdate WHERE (agencyUpdate.rid = registeredAgency.rid) AND (type = 'programme') /* AND (year = %s) */ AND NOT crossBorder) AS Prog_home,\n   (SELECT SUM(amount) FROM agencyUpdate WHERE (agencyUpdate.rid = registeredAgency.rid) AND (type = 'institutional') /* AND (year = %s) */ AND NOT crossBorder) AS Inst_home,\n   (SELECT SUM(amount) FROM agencyUpdate WHERE (agencyUpdate.rid = registeredAgency.rid) AND (type = 'joint programme') /* AND (year = %s) */ AND NOT crossBorder) AS JP_home,\n   (SELECT SUM(amount) FROM agencyUpdate WHERE (agencyUpdate.rid = registeredAgency.rid) AND (type = 'Prog') /* AND (year = %s) */ AND crossBorder) AS Prog_CB,\n   (SELECT SUM(amount) FROM agencyUpdate WHERE (agencyUpdate.rid = registeredAgency.rid) AND (type = 'Inst') /* AND (year = %s) */ AND crossBorder) AS Inst_CB,\n   (SELECT SUM(amount) FROM agencyUpdate WHERE (agencyUpdate.rid = registeredAgency.rid) AND (type = 'JP') /* AND (year = %s) */ AND crossBorder) AS JP_CB\nFROM registeredAgency\nHAVING (Prog_home>0)or(Inst_home>0)or(JP_home>0)or(Prog_CB>0)or(Inst_CB>0)or(JP_CB>0)\nORDER BY shortname ASC"
    },
    "b453eaf4e98786a8c19593fff00a2ace": {
      "name": "b453eaf4e98786a8c19593fff00a2ace",
      "description": "Agencies: compliance table",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "aid",
      "searchable": 0,
      "underlyingTable": "applications",
      "templates": [],
      "allowNew": true,
      "allowEdit": true,
      "allowDelete": false,
      "sql": "SELECT\n   registeredAgency.shortname ,\n   registeredAgency.registered ,\n   applications.aid AS id,\n   applications.decisiondate ,\n   applications.type ,\n   applications.rc_2_1 ,\n   applications.rc_2_2 ,\n   applications.rc_2_3 ,\n   applications.rc_2_4 ,\n   applications.rc_2_5 ,\n   applications.rc_2_6 ,\n   applications.rc_2_7 ,\n   applications.rc_3_1 ,\n   applications.rc_3_2 ,\n   applications.rc_3_3 ,\n   applications.rc_3_4 ,\n   applications.rc_3_5 ,\n   applications.rc_3_6\nFROM\n( SELECT MAX( aid ) AS aid, rid FROM applications WHERE applications.stage >= '8. Completed' GROUP BY rid ) AS latest\nINNER JOIN registeredAgency ON ( registeredAgency.rid = latest.rid )\nINNER JOIN applications ON ( applications.aid = latest.aid)\n/* WHERE\n   applications.rc_2_1 IS NOT NULL */"
    },
    "b47fb8787adbef28aefa4a6dabaf0dcb": {
      "name": "b47fb8787adbef28aefa4a6dabaf0dcb",
      "description": "DEQAR: list for agreements",
      "section": "query",
      "userQuery": "true",
      "saveQuery": "1",
      "isPublic": "1",
      "priKey": "pid",
      "searchable": 0,
      "underlyingTable": "deqarPartner",
      "templates": [],
      "allowNew": false,
      "allowEdit": true,
      "allowDelete": false,
      "sql": "select deqarPartner.pid AS id, organisation.name, organisation.address1 , organisation.address2 , organisation.postcode , organisation.city , country.name AS country, deqarPartner.pic,  deqarPartner.type, deqarPartner.signatory_name, deqarPartner.expenditure, deqarPartner.max_contrib,round( 100* deqarPartner.max_contrib / deqarPartner.expenditure,1 ) as percentage , deqarPartner.prog_report_expected from deqarPartner left join organisation using(oid) left join country on (country.iso2=organisation.country) where type != 'Associate Partner' and type != 'Coordinator' order by pid"
    },
    "b6bc811fbd385bba4cf7c7f7a096e2d7": {
      "name": "b6bc811fbd385bba4cf7c7f7a096e2d7",
      "description": "Applications: review panel members",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "cid",
      "searchable": 0,
      "underlyingTable": "contact",
      "templates": [],
      "allowNew": true,
      "allowEdit": true,
      "allowDelete": true,
      "sql": "select\n  contact.cid AS id,\n  contact.person,\n  contact.email,\n  count(distinct aid) as total,\n  group_concat(if( applicationRole.role = 'Panel chair', registeredAgency.shortname,null) separator ', ') as panel_chair,\n  group_concat(if( applicationRole.role = 'Panel member', registeredAgency.shortname,NULL) separator ', ') as panel_member,\n  group_concat(if( applicationRole.role = 'Panel secretary', registeredAgency.shortname,NULL) separator ', ') as panel_secretary,\n  group_concat(if( applicationRole.role = 'Coordinator', registeredAgency.shortname,NULL) separator ', ') as coordinator\nfrom applicationRole left join contact using(cid) left join applications using(aid) left join registeredAgency using(rid)\ngroup by contact.cid\norder by total desc"
    },
    "bb17d852957e8e39601bd5d3fee9fdf5": {
      "name": "bb17d852957e8e39601bd5d3fee9fdf5",
      "description": "Agencies: expiry list",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "rid",
      "searchable": 0,
      "underlyingTable": "registeredAgency",
      "templates": [],
      "allowNew": true,
      "allowEdit": true,
      "allowDelete": false,
      "sql": "SELECT\n  registeredAgency.rid AS id,\n  registeredAgency.shortname,\n  registeredAgency.registeredsince,\n  registeredAgency.validuntil,\n  IF(applications.aid IS NULL,'No','Yes') AS renewal_applied,\n  applications.aid,\n  applications.submitdate,\n  applications.stage,\n  applications.reportexpected,\n  CASE WHEN (applications.stage > '2. Waiting report') THEN 'OK'\n       WHEN (registeredAgency.validuntil + INTERVAL 3 MONTH < NOW()) THEN 'Report late!'\n       WHEN (registeredAgency.validuntil < NOW()) THEN 'Remind: report (3 months buffer)'\n       WHEN ( registeredAgency.validuntil - INTERVAL 1 YEAR < NOW() AND applications.aid IS NULL) THEN 'Remind: application'\n       ELSE 'OK'\n  END AS timing,\n  applications.reportdate\nFROM\n  registeredAgency\nLEFT JOIN\n  applications ON ( (applications.rid=registeredAgency.rid) AND\n  (applications.submitdate > registeredAgency.validuntil - INTERVAL 3 YEAR) )\nWHERE\n  registeredAgency.registered \nORDER BY\n  registeredAgency.validuntil"
    },
    "bd6ed2e2f7f9857dd754958c67cea3e7": {
      "name": "bd6ed2e2f7f9857dd754958c67cea3e7",
      "description": "External QA activity: CB by target country ALL",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "_count",
      "searchable": 0,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "SELECT   country.name AS country,   \n(SELECT SUM(amount) FROM agencyUpdate WHERE agencyUpdate.country = country.iso3 AND agencyUpdate.crossborder AND agencyUpdate.year = '2014') AS cb_2014,   \n(SELECT SUM(amount) FROM agencyUpdate WHERE agencyUpdate.country = country.iso3 AND agencyUpdate.year = '2014') AS total_2014,   \n(SELECT SUM(amount) FROM agencyUpdate WHERE agencyUpdate.country = country.iso3 AND agencyUpdate.crossborder AND agencyUpdate.year = '2015') AS cb_2015,   \n(SELECT SUM(amount) FROM agencyUpdate WHERE agencyUpdate.country = country.iso3 AND agencyUpdate.year = '2015') AS total_2015,   \n(SELECT SUM(amount) FROM agencyUpdate WHERE agencyUpdate.country = country.iso3 AND agencyUpdate.crossborder AND agencyUpdate.year = '2016') AS cb_2016,   \n(SELECT SUM(amount) FROM agencyUpdate WHERE agencyUpdate.country = country.iso3 AND agencyUpdate.year = '2016') AS total_2016,   \n(SELECT SUM(amount) FROM agencyUpdate WHERE agencyUpdate.country = country.iso3 AND agencyUpdate.crossborder AND agencyUpdate.year = '2017') AS cb_2017,\n(SELECT SUM(amount) FROM agencyUpdate WHERE agencyUpdate.country = country.iso3 AND agencyUpdate.year = '2017') AS total_2017,\n(SELECT SUM(amount) FROM agencyUpdate WHERE agencyUpdate.country = country.iso3 AND agencyUpdate.crossborder AND agencyUpdate.year = '2018') AS cb_2018,\n(SELECT SUM(amount) FROM agencyUpdate WHERE agencyUpdate.country = country.iso3 AND agencyUpdate.year = '2018') AS total_2018, \n(SELECT SUM(amount) FROM agencyUpdate WHERE agencyUpdate.country = country.iso3 AND agencyUpdate.crossborder AND agencyUpdate.year = '2019') AS cb_2019, (SELECT SUM(amount) FROM agencyUpdate WHERE agencyUpdate.country = country.iso3 AND agencyUpdate.year = '2019') AS total_2019 FROM country HAVING total_2014 > 0 OR total_2015 > 0 OR total_2016 > 0 OR total_2017 >  0 OR total_2018 >  0 OR total_2019 >0 ORDER BY cb_2019 DESC"
    },
    "bfd9b2fbab33c0b91906c80d59cc5c51": {
      "name": "bfd9b2fbab33c0b91906c80d59cc5c51",
      "description": "Applications: decided 2019",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "_count",
      "searchable": 0,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "select applications.aid, registeredAgency.shortname, applications.type, applications.submitdate, applications.reportdate, applications.decisiondate, applications.result from applications left join registeredAgency using(rid) where (decisiondate between '2019-01-01' and '2019-12-31')"
    },
    "c1a79bbe47da36ad2c7bbeefee5c0a87": {
      "name": "c1a79bbe47da36ad2c7bbeefee5c0a87",
      "description": "Applications: RC vs panel conclusions - by year",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "_count",
      "searchable": 0,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "select year(decisionDate) as `Year` , ( (panel_2_1 = rc_2_1) or (panel_2_1 in (\"Full compliance\", \"Substantial compliance\") and rc_2_1 = \"Compliance\") ) + ( (panel_2_2 = rc_2_2) or (panel_2_2 in (\"Full compliance\", \"Substantial compliance\") and rc_2_2 = \"Compliance\") ) + ( (panel_2_3 = rc_2_3) or (panel_2_3 in (\"Full compliance\", \"Substantial compliance\") and rc_2_3 = \"Compliance\") ) + ( (panel_2_4 = rc_2_4) or (panel_2_4 in (\"Full compliance\", \"Substantial compliance\") and rc_2_4 = \"Compliance\") ) + ( (panel_2_5 = rc_2_5) or (panel_2_5 in (\"Full compliance\", \"Substantial compliance\") and rc_2_5 = \"Compliance\") ) + ( (panel_2_6 = rc_2_6) or (panel_2_6 in (\"Full compliance\", \"Substantial compliance\") and rc_2_6 = \"Compliance\") ) + ( (panel_2_7 = rc_2_7) or (panel_2_7 in (\"Full compliance\", \"Substantial compliance\") and rc_2_7 = \"Compliance\") ) + ( (panel_3_1 = rc_3_1) or (panel_3_1 in (\"Full compliance\", \"Substantial compliance\") and rc_3_1 = \"Compliance\") ) + ( (panel_3_2 = rc_3_2) or (panel_3_2 in (\"Full compliance\", \"Substantial compliance\") and rc_3_2 = \"Compliance\") ) + ( (panel_3_3 = rc_3_3) or (panel_3_3 in (\"Full compliance\", \"Substantial compliance\") and rc_3_3 = \"Compliance\") ) + ( (panel_3_4 = rc_3_4) or (panel_3_4 in (\"Full compliance\", \"Substantial compliance\") and rc_3_4 = \"Compliance\") ) + ( (panel_3_5 = rc_3_5) or (panel_3_5 in (\"Full compliance\", \"Substantial compliance\") and rc_3_5 = \"Compliance\") ) + ( (panel_3_6 = rc_3_6) or (panel_3_6 in (\"Full compliance\", \"Substantial compliance\") and rc_3_6 = \"Compliance\") ) AS `Conclusions equal`, count(*) as `Applications` from applications where panel_2_1 is not null and stage = '8. Completed' group by `Year`, `Conclusions equal` order by `Year`, `Conclusions equal` desc"
    },
    "c43c0826be88519045e64979f6324fc2": {
      "name": "c43c0826be88519045e64979f6324fc2",
      "description": "Agencies: email addresses",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "_count",
      "searchable": 0,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "select   'Registered QAAs' as Category, count(distinct rid) AS Count, count(distinct contact.cid) AS Emails, group_concat(DISTINCT contact.email SEPARATOR ', ') as emails from registeredAgency left join organisation using(oid) left join contact_organisation using(oid) left join contact on contact.cid = contact_organisation.cid or contact.cid = registeredAgency.mainContact where   registeredAgency.registered and contact_organisation.sendofficial"
    },
    "c8fc6bde2dc90d1fc3b68db63638be7e": {
      "name": "c8fc6bde2dc90d1fc3b68db63638be7e",
      "description": "EQAR members: representatives and full details",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "_count",
      "searchable": 0,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "SELECT \tmember.mid, \torganisation.oid, \tmember.cat, \tmember.votes, \tmember.name AS member, \torganisation.name AS organisation, \tGROUP_CONCAT(contact.person SEPARATOR ', ') AS contacts, \tGROUP_CONCAT(DISTINCT contact.email SEPARATOR ', ') AS email, \tGROUP_CONCAT(DISTINCT contact.phone SEPARATOR ', ') AS phone, \torganisation.address1, \torganisation.address2, \torganisation.postcode, organisation.city, \tcountry.name AS country, \tmember.formDate, \tmember.signatory, \tmember.function, \t(SELECT SUM(invoice.fee) FROM invoice WHERE invoice.mid = member.mid) AS fee FROM member LEFT JOIN organisation USING ( oid ) LEFT JOIN contact_organisation USING(oid) LEFT JOIN contact USING (cid) LEFT JOIN country ON ( country.iso2 = IF( contact.country != '**', contact.country, organisation.country ) ) WHERE ( contact_organisation.sendofficial > 0) GROUP BY organisation.oid ORDER BY member.cat ASC, member.name ASC"
    },
    "cb1479bf52f17baf3526903a552c7625": {
      "name": "cb1479bf52f17baf3526903a552c7625",
      "description": "External QA activity: CB, EHEA vs non-EHEA, by year",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "_count",
      "searchable": 0,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "select agencyUpdate.year,\n    IF(agencyUpdate.crossborder=1,'Cross-border','National') as is_cb,\n    IF( country.ehea = 1,'EHEA','Non-EHEA') as geo_area,\n   sum(amount) from agencyUpdate left join registeredAgency using(rid) left join country on (country.iso3 = agencyUpdate.country) group by agencyUpdate.year,is_cb,geo_area with rollup"
    },
    "cbd236dc055dbeaff6833f7877e2ee63": {
      "name": "cbd236dc055dbeaff6833f7877e2ee63",
      "description": "Applications: compliance - table with clarification requests",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "_count",
      "searchable": 0,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "SELECT\n    CONCAT('A', applications.aid) AS `ID`,\n    registeredAgency.shortname AS `Agency`,\n    applications.type AS `Type`,\n    COALESCE(organisation.acronym, organisation.longname) AS `Coordinator`,\n    YEAR(applications.reportDate) AS `Report year`,\n    YEAR(applications.decisionDate) AS `Decision year`,\n    IF(applicationClarification.esg_2_1, CASE rc_2_1 WHEN 'Compliance' THEN CASE panel_2_1 WHEN 'Full compliance' THEN 'FC = C' WHEN 'Substantial compliance' THEN 'SC = C' WHEN 'Partial compliance' THEN 'PC > C' WHEN 'Non-compliance' THEN 'NC > C' ELSE '?? - C' END WHEN 'Partial compliance' THEN CASE panel_2_1 WHEN 'Full compliance' THEN 'FC > PC' WHEN 'Substantial compliance' THEN 'SC > PC' WHEN 'Partial compliance' THEN 'PC = PC' WHEN 'Non-compliance' THEN 'NC > PC' ELSE '?? - PC' END WHEN 'Non-compliance' THEN CASE panel_2_1 WHEN 'Full compliance' THEN 'FC > NC' WHEN 'Substantial compliance' THEN 'FC > NC' WHEN 'Partial compliance' THEN 'PC > NC' WHEN 'Non-compliance' THEN 'NC = NC' ELSE '?? - NC' END END, '') AS `ESG 2.1`,\n    IF(applicationClarification.esg_2_2, CASE rc_2_2 WHEN 'Compliance' THEN CASE panel_2_2 WHEN 'Full compliance' THEN 'FC = C' WHEN 'Substantial compliance' THEN 'SC = C' WHEN 'Partial compliance' THEN 'PC > C' WHEN 'Non-compliance' THEN 'NC > C' ELSE '?? - C' END WHEN 'Partial compliance' THEN CASE panel_2_2 WHEN 'Full compliance' THEN 'FC > PC' WHEN 'Substantial compliance' THEN 'SC > PC' WHEN 'Partial compliance' THEN 'PC = PC' WHEN 'Non-compliance' THEN 'NC > PC' ELSE '?? - PC' END WHEN 'Non-compliance' THEN CASE panel_2_2 WHEN 'Full compliance' THEN 'FC > NC' WHEN 'Substantial compliance' THEN 'FC > NC' WHEN 'Partial compliance' THEN 'PC > NC' WHEN 'Non-compliance' THEN 'NC = NC' ELSE '?? - NC' END END, '') AS `ESG 2.2`,\n    IF(applicationClarification.esg_2_3, CASE rc_2_3 WHEN 'Compliance' THEN CASE panel_2_3 WHEN 'Full compliance' THEN 'FC = C' WHEN 'Substantial compliance' THEN 'SC = C' WHEN 'Partial compliance' THEN 'PC > C' WHEN 'Non-compliance' THEN 'NC > C' ELSE '?? - C' END WHEN 'Partial compliance' THEN CASE panel_2_3 WHEN 'Full compliance' THEN 'FC > PC' WHEN 'Substantial compliance' THEN 'SC > PC' WHEN 'Partial compliance' THEN 'PC = PC' WHEN 'Non-compliance' THEN 'NC > PC' ELSE '?? - PC' END WHEN 'Non-compliance' THEN CASE panel_2_3 WHEN 'Full compliance' THEN 'FC > NC' WHEN 'Substantial compliance' THEN 'FC > NC' WHEN 'Partial compliance' THEN 'PC > NC' WHEN 'Non-compliance' THEN 'NC = NC' ELSE '?? - NC' END END, '') AS `ESG 2.3`,\n    IF(applicationClarification.esg_2_4, CASE rc_2_4 WHEN 'Compliance' THEN CASE panel_2_4 WHEN 'Full compliance' THEN 'FC = C' WHEN 'Substantial compliance' THEN 'SC = C' WHEN 'Partial compliance' THEN 'PC > C' WHEN 'Non-compliance' THEN 'NC > C' ELSE '?? - C' END WHEN 'Partial compliance' THEN CASE panel_2_4 WHEN 'Full compliance' THEN 'FC > PC' WHEN 'Substantial compliance' THEN 'SC > PC' WHEN 'Partial compliance' THEN 'PC = PC' WHEN 'Non-compliance' THEN 'NC > PC' ELSE '?? - PC' END WHEN 'Non-compliance' THEN CASE panel_2_4 WHEN 'Full compliance' THEN 'FC > NC' WHEN 'Substantial compliance' THEN 'FC > NC' WHEN 'Partial compliance' THEN 'PC > NC' WHEN 'Non-compliance' THEN 'NC = NC' ELSE '?? - NC' END END, '') AS `ESG 2.4`,\n    IF(applicationClarification.esg_2_5, CASE rc_2_5 WHEN 'Compliance' THEN CASE panel_2_5 WHEN 'Full compliance' THEN 'FC = C' WHEN 'Substantial compliance' THEN 'SC = C' WHEN 'Partial compliance' THEN 'PC > C' WHEN 'Non-compliance' THEN 'NC > C' ELSE '?? - C' END WHEN 'Partial compliance' THEN CASE panel_2_5 WHEN 'Full compliance' THEN 'FC > PC' WHEN 'Substantial compliance' THEN 'SC > PC' WHEN 'Partial compliance' THEN 'PC = PC' WHEN 'Non-compliance' THEN 'NC > PC' ELSE '?? - PC' END WHEN 'Non-compliance' THEN CASE panel_2_5 WHEN 'Full compliance' THEN 'FC > NC' WHEN 'Substantial compliance' THEN 'FC > NC' WHEN 'Partial compliance' THEN 'PC > NC' WHEN 'Non-compliance' THEN 'NC = NC' ELSE '?? - NC' END END, '') AS `ESG 2.5`,\n    IF(applicationClarification.esg_2_6, CASE rc_2_6 WHEN 'Compliance' THEN CASE panel_2_6 WHEN 'Full compliance' THEN 'FC = C' WHEN 'Substantial compliance' THEN 'SC = C' WHEN 'Partial compliance' THEN 'PC > C' WHEN 'Non-compliance' THEN 'NC > C' ELSE '?? - C' END WHEN 'Partial compliance' THEN CASE panel_2_6 WHEN 'Full compliance' THEN 'FC > PC' WHEN 'Substantial compliance' THEN 'SC > PC' WHEN 'Partial compliance' THEN 'PC = PC' WHEN 'Non-compliance' THEN 'NC > PC' ELSE '?? - PC' END WHEN 'Non-compliance' THEN CASE panel_2_6 WHEN 'Full compliance' THEN 'FC > NC' WHEN 'Substantial compliance' THEN 'FC > NC' WHEN 'Partial compliance' THEN 'PC > NC' WHEN 'Non-compliance' THEN 'NC = NC' ELSE '?? - NC' END END, '') AS `ESG 2.6`,\n    IF(applicationClarification.esg_2_7, CASE rc_2_7 WHEN 'Compliance' THEN CASE panel_2_7 WHEN 'Full compliance' THEN 'FC = C' WHEN 'Substantial compliance' THEN 'SC = C' WHEN 'Partial compliance' THEN 'PC > C' WHEN 'Non-compliance' THEN 'NC > C' ELSE '?? - C' END WHEN 'Partial compliance' THEN CASE panel_2_7 WHEN 'Full compliance' THEN 'FC > PC' WHEN 'Substantial compliance' THEN 'SC > PC' WHEN 'Partial compliance' THEN 'PC = PC' WHEN 'Non-compliance' THEN 'NC > PC' ELSE '?? - PC' END WHEN 'Non-compliance' THEN CASE panel_2_7 WHEN 'Full compliance' THEN 'FC > NC' WHEN 'Substantial compliance' THEN 'FC > NC' WHEN 'Partial compliance' THEN 'PC > NC' WHEN 'Non-compliance' THEN 'NC = NC' ELSE '?? - NC' END END, '') AS `ESG 2.7`,\n    IF(applicationClarification.esg_3_1, CASE rc_3_1 WHEN 'Compliance' THEN CASE panel_3_1 WHEN 'Full compliance' THEN 'FC = C' WHEN 'Substantial compliance' THEN 'SC = C' WHEN 'Partial compliance' THEN 'PC > C' WHEN 'Non-compliance' THEN 'NC > C' ELSE '?? - C' END WHEN 'Partial compliance' THEN CASE panel_3_1 WHEN 'Full compliance' THEN 'FC > PC' WHEN 'Substantial compliance' THEN 'SC > PC' WHEN 'Partial compliance' THEN 'PC = PC' WHEN 'Non-compliance' THEN 'NC > PC' ELSE '?? - PC' END WHEN 'Non-compliance' THEN CASE panel_3_1 WHEN 'Full compliance' THEN 'FC > NC' WHEN 'Substantial compliance' THEN 'FC > NC' WHEN 'Partial compliance' THEN 'PC > NC' WHEN 'Non-compliance' THEN 'NC = NC' ELSE '?? - NC' END END, '') AS `ESG 3.1`,\n    IF(applicationClarification.esg_3_2, CASE rc_3_2 WHEN 'Compliance' THEN CASE panel_3_2 WHEN 'Full compliance' THEN 'FC = C' WHEN 'Substantial compliance' THEN 'SC = C' WHEN 'Partial compliance' THEN 'PC > C' WHEN 'Non-compliance' THEN 'NC > C' ELSE '?? - C' END WHEN 'Partial compliance' THEN CASE panel_3_2 WHEN 'Full compliance' THEN 'FC > PC' WHEN 'Substantial compliance' THEN 'SC > PC' WHEN 'Partial compliance' THEN 'PC = PC' WHEN 'Non-compliance' THEN 'NC > PC' ELSE '?? - PC' END WHEN 'Non-compliance' THEN CASE panel_3_2 WHEN 'Full compliance' THEN 'FC > NC' WHEN 'Substantial compliance' THEN 'FC > NC' WHEN 'Partial compliance' THEN 'PC > NC' WHEN 'Non-compliance' THEN 'NC = NC' ELSE '?? - NC' END END, '') AS `ESG 3.2`,\n    IF(applicationClarification.esg_3_3, CASE rc_3_3 WHEN 'Compliance' THEN CASE panel_3_3 WHEN 'Full compliance' THEN 'FC = C' WHEN 'Substantial compliance' THEN 'SC = C' WHEN 'Partial compliance' THEN 'PC > C' WHEN 'Non-compliance' THEN 'NC > C' ELSE '?? - C' END WHEN 'Partial compliance' THEN CASE panel_3_3 WHEN 'Full compliance' THEN 'FC > PC' WHEN 'Substantial compliance' THEN 'SC > PC' WHEN 'Partial compliance' THEN 'PC = PC' WHEN 'Non-compliance' THEN 'NC > PC' ELSE '?? - PC' END WHEN 'Non-compliance' THEN CASE panel_3_3 WHEN 'Full compliance' THEN 'FC > NC' WHEN 'Substantial compliance' THEN 'FC > NC' WHEN 'Partial compliance' THEN 'PC > NC' WHEN 'Non-compliance' THEN 'NC = NC' ELSE '?? - NC' END END, '') AS `ESG 3.3`,\n    IF(applicationClarification.esg_3_4, CASE rc_3_4 WHEN 'Compliance' THEN CASE panel_3_4 WHEN 'Full compliance' THEN 'FC = C' WHEN 'Substantial compliance' THEN 'SC = C' WHEN 'Partial compliance' THEN 'PC > C' WHEN 'Non-compliance' THEN 'NC > C' ELSE '?? - C' END WHEN 'Partial compliance' THEN CASE panel_3_4 WHEN 'Full compliance' THEN 'FC > PC' WHEN 'Substantial compliance' THEN 'SC > PC' WHEN 'Partial compliance' THEN 'PC = PC' WHEN 'Non-compliance' THEN 'NC > PC' ELSE '?? - PC' END WHEN 'Non-compliance' THEN CASE panel_3_4 WHEN 'Full compliance' THEN 'FC > NC' WHEN 'Substantial compliance' THEN 'FC > NC' WHEN 'Partial compliance' THEN 'PC > NC' WHEN 'Non-compliance' THEN 'NC = NC' ELSE '?? - NC' END END, '') AS `ESG 3.4`,\n    IF(applicationClarification.esg_3_5, CASE rc_3_5 WHEN 'Compliance' THEN CASE panel_3_5 WHEN 'Full compliance' THEN 'FC = C' WHEN 'Substantial compliance' THEN 'SC = C' WHEN 'Partial compliance' THEN 'PC > C' WHEN 'Non-compliance' THEN 'NC > C' ELSE '?? - C' END WHEN 'Partial compliance' THEN CASE panel_3_5 WHEN 'Full compliance' THEN 'FC > PC' WHEN 'Substantial compliance' THEN 'SC > PC' WHEN 'Partial compliance' THEN 'PC = PC' WHEN 'Non-compliance' THEN 'NC > PC' ELSE '?? - PC' END WHEN 'Non-compliance' THEN CASE panel_3_5 WHEN 'Full compliance' THEN 'FC > NC' WHEN 'Substantial compliance' THEN 'FC > NC' WHEN 'Partial compliance' THEN 'PC > NC' WHEN 'Non-compliance' THEN 'NC = NC' ELSE '?? - NC' END END, '') AS `ESG 3.5`,\n    IF(applicationClarification.esg_3_6, CASE rc_3_6 WHEN 'Compliance' THEN CASE panel_3_6 WHEN 'Full compliance' THEN 'FC = C' WHEN 'Substantial compliance' THEN 'SC = C' WHEN 'Partial compliance' THEN 'PC > C' WHEN 'Non-compliance' THEN 'NC > C' ELSE '?? - C' END WHEN 'Partial compliance' THEN CASE panel_3_6 WHEN 'Full compliance' THEN 'FC > PC' WHEN 'Substantial compliance' THEN 'SC > PC' WHEN 'Partial compliance' THEN 'PC = PC' WHEN 'Non-compliance' THEN 'NC > PC' ELSE '?? - PC' END WHEN 'Non-compliance' THEN CASE panel_3_6 WHEN 'Full compliance' THEN 'FC > NC' WHEN 'Substantial compliance' THEN 'FC > NC' WHEN 'Partial compliance' THEN 'PC > NC' WHEN 'Non-compliance' THEN 'NC = NC' ELSE '?? - NC' END END, '') AS `ESG 3.6`, applications.comment, applicationClarification.type as clarification_type, applicationClarification.sentOn, applicationClarification.replyOn, applicationClarification.esg_2_1, applicationClarification.esg_2_2, applicationClarification.esg_2_3, applicationClarification.esg_2_4, applicationClarification.esg_2_5, applicationClarification.esg_2_6, applicationClarification.esg_2_7, applicationClarification.esg_3_1, applicationClarification.esg_3_2, applicationClarification.esg_3_3, applicationClarification.esg_3_4, applicationClarification.esg_3_5, applicationClarification.esg_3_6, applicationClarification.notes \n    FROM applications\n    LEFT JOIN applicationClarification USING(aid)\n    LEFT JOIN registeredAgency USING(rid)\n    LEFT JOIN organisation ON organisation.oid = applications.coordinator WHERE stage = '8. Completed' AND aid > 25 ORDER BY aid"
    },
    "d7e6c440dcf014be1b4377ecbdd14055": {
      "name": "d7e6c440dcf014be1b4377ecbdd14055",
      "description": "Agencies: operating countries",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "rid",
      "searchable": 0,
      "underlyingTable": "registeredAgency",
      "templates": [],
      "allowNew": true,
      "allowEdit": true,
      "allowDelete": false,
      "sql": "select\n  registeredAgency.shortname AS Agency ,\n  registeredAgency.rid AS id,\n  registeredAgency.basecountry,\n  group_concat( distinct country.name order by country.ehea DESC, country.name separator ', ') AS Countries ,\n  group_concat(distinct agencyUpdate.type separator ', ') AS Types,\n  sum( agencyUpdate.amount ) AS Reviews\nFROM\n  registeredAgency\nLEFT JOIN\n  agencyUpdate USING(rid)\nLEFT JOIN\n  country ON (country.iso3=agencyUpdate.country)\nWHERE\n  agencyUpdate.year >= 2012\nGROUP BY\n  registeredAgency.rid\nORDER BY\n  registeredAgency.shortname"
    },
    "d857156285e9ee83764b55621dd3b20b": {
      "name": "d857156285e9ee83764b55621dd3b20b",
      "description": "Applications: decided 2015-2021",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "_count",
      "searchable": 0,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "select applications.aid, registeredAgency.shortname, applications.type, applications.reportSubmitted, applications.reportdate, applications.decisiondate, applications.result from applications left join registeredAgency using(rid) where (decisiondate between '2015-01-01' and '2021-12-31')"
    },
    "dbdcb0e368dccd276c6b55d8db18d389": {
      "name": "dbdcb0e368dccd276c6b55d8db18d389",
      "description": "EQAR members: fee table",
      "section": "query",
      "userQuery": "true",
      "saveQuery": "1",
      "isPublic": "1",
      "priKey": "mid",
      "searchable": 0,
      "underlyingTable": "member",
      "templates": [],
      "allowNew": false,
      "allowEdit": true,
      "allowDelete": false,
      "sql": "SELECT \tmember.mid AS id, \tmember.cat, \tmember.votes, \tmember.formDate, \tmember.name AS member, \tSUM(invoice.fee) AS fee_total, \tCONCAT(CAST(COUNT(invoice.iid) AS CHAR), \t\tIF(COUNT(invoice.iid) > 1, \t\t\tCONCAT(' ( ', GROUP_CONCAT(CAST(invoice.fee AS CHAR(7)) SEPARATOR ' + '), ' )'), \t\t\t'' ) \t) AS invoices FROM member LEFT JOIN invoice USING ( mid )  GROUP BY mid ORDER BY member.cat ASC, member.name ASC"
    },
    "dc550b2732838b5a5d136abe32fcde23": {
      "name": "dc550b2732838b5a5d136abe32fcde23",
      "description": "Applications: on agenda, with compliance levels ",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "aid",
      "searchable": 0,
      "underlyingTable": "applications",
      "templates": [],
      "allowNew": true,
      "allowEdit": true,
      "allowDelete": false,
      "sql": "select applications.aid AS id, registeredAgency.shortname AS Applicant, applications.reportDate AS 'Report of', applications.type AS Type, applications.stage AS Stage, concat(r1.person,', ',r2.person) AS Rapporteurs, r3.person AS '3rd rapporteur',\n applications.panel_2_1, applications.rapp_2_1,\n applications.panel_2_2, applications.rapp_2_2,\n applications.panel_2_3, applications.rapp_2_3,\n applications.panel_2_4, applications.rapp_2_4,\n applications.panel_2_5, applications.rapp_2_5,\n applications.panel_2_6, applications.rapp_2_6,\n applications.panel_2_7, applications.rapp_2_7,\n applications.panel_3_1, applications.rapp_3_1,\n applications.panel_3_2, applications.rapp_3_2,\n applications.panel_3_3, applications.rapp_3_3,\n applications.panel_3_4, applications.rapp_3_4,\n applications.panel_3_5, applications.rapp_3_5,\n applications.panel_3_6, applications.rapp_3_6 from applications\nleft join registeredAgency using(rid)\nleft join organisation using(oid)\nleft join contact as r1 on (r1.cid = applications.rapporteur1)\nleft join contact as r2 on (r2.cid = applications.rapporteur2)\nleft join contact as r3 on (r3.cid = applications.rapporteur3)\nwhere stage > '2. Waiting report' and stage < '8. Completed' and stage != '-- Withdrawn' order by aid"
    },
    "dd6c53d24b9ad2ae4fbca058350bb2a0": {
      "name": "dd6c53d24b9ad2ae4fbca058350bb2a0",
      "description": "External QA activity: JP vs all activities, by year",
      "section": "query",
      "userQuery": "true",
      "saveQuery": "1",
      "isPublic": "1",
      "priKey": "_count",
      "searchable": 0,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "select 'Joint programmes' as type,year,sum(amount) from agencyUpdate where type='joint programme' group by year\nunion select 'All EQA activities' as type,year,sum(amount) from agencyUpdate group by year order by year,type"
    },
    "e954eaae8ab66fefb7f78ee1f43305a1": {
      "name": "e954eaae8ab66fefb7f78ee1f43305a1",
      "description": "DEQAR: emails non-partner QAAs",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "_count",
      "searchable": 0,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "select count(cid) as N, group_concat( contact.email SEPARATOR ', ') AS emails from registeredAgency left join contact_organisation using(oid) left join contact using(cid) left join deqarPartner using(oid) where registered and deqarPartner.pid is null and contact_organisation.senddeqar"
    },
    "ea5f467c0fb85d4cc659d4e8a30aff4a": {
      "name": "ea5f467c0fb85d4cc659d4e8a30aff4a",
      "description": "DEQAR: partner emails",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "_count",
      "searchable": 0,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "SELECT\n  deqarPartner.type AS partner_role,\n  count(distinct deqarPartner.pid) AS partners,\n  count(distinct contact.cid) AS persons,\n  GROUP_CONCAT(distinct contact.email SEPARATOR ', ' ) AS emails\nFROM deqarPartner\nLEFT JOIN contact_organisation USING(oid)\nLEFT JOIN contact ON ( contact.cid = deqarPartner.manager OR contact.cid = deqarPartner.technician OR ( contact.cid = contact_organisation.cid AND contact_organisation.senddeqar ) ) \nGROUP BY deqarPartner.type"
    },
    "ec614edb5fe088012815387e333bfa28": {
      "name": "ec614edb5fe088012815387e333bfa28",
      "description": "EQAR members: governments",
      "section": "query",
      "userQuery": "true",
      "saveQuery": "1",
      "isPublic": "1",
      "priKey": "mid",
      "searchable": 0,
      "underlyingTable": "member",
      "templates": [],
      "allowNew": false,
      "allowEdit": true,
      "allowDelete": false,
      "sql": "select\n  mid AS id,\n  concat( member.name, '\\n',\n    regexp_replace(\n      organisation.longname,\n      '\\\\s*\\\\([A-Z]{2,3}\\\\)\\\\s*$',\n      ''\n    )\n  ) as member\nfrom member\nleft join organisation using(oid)\nwhere cat = 'GOV'\norder by member.name"
    },
    "ed34475bb6f2affee217dae0b3fd86e2": {
      "name": "ed34475bb6f2affee217dae0b3fd86e2",
      "description": "External QA activity: by country and agencies (all years)",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "iso3",
      "searchable": 1,
      "underlyingTable": "country",
      "templates": [],
      "allowNew": false,
      "allowEdit": true,
      "allowDelete": false,
      "sql": "SELECT\n  ehea, iso3, iso2, country,\n  GROUP_CONCAT(agency ORDER BY amount DESC SEPARATOR ', ') AS agencies\nFROM (\n  SELECT\n    IF(country.ehea, 'EHEA', 'Non-EHEA') AS ehea,\n    country.iso3,\n    country.iso2,\n    country.infogram_name AS country,\n    CONCAT( registeredAgency.shortname, ' ', SUM(agencyUpdate.amount) ) AS agency,\n    SUM(agencyUpdate.amount) AS amount\n  FROM agencyUpdate\n  LEFT JOIN country ON ( agencyUpdate.country = country.iso3 )\n  LEFT JOIN registeredAgency USING(rid)\n  /* WHERE agencyUpdate.year = %s */\n  GROUP BY country.ehea, country.iso3, agencyUpdate.rid\n) AS ungrouped\nGROUP BY ehea, iso3"
    },
    "ef598764da9283bac845d12eb49c63fb": {
      "name": "ef598764da9283bac845d12eb49c63fb",
      "description": "Applications: compliance - overall statistics",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "_count",
      "searchable": 1,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "SELECT\n  compliance.who AS `Who`,\n  compliance.level AS `Compliance level`,\n  (SELECT count(aid) FROM applications\n    WHERE aid >= 26 AND stage = '8. Completed' AND rc_2_1 IS NOT NULL AND\n    /* EXTRACT(YEAR FROM decisiondate) = %s AND */\n    (CASE compliance.who\n     WHEN 'RC' THEN (rc_2_1 = compliance.level)\n     WHEN 'Rapporteurs' THEN (rapp_2_1 = compliance.level)\n     WHEN 'Panel' THEN (panel_2_1 = compliance.level)\n    END)) AS `ESG 2.1`,\n  (SELECT count(aid) FROM applications\n    WHERE aid >= 26 AND stage = '8. Completed' AND rc_2_1 IS NOT NULL AND\n    /* EXTRACT(YEAR FROM decisiondate) = %s AND */\n    (CASE compliance.who\n     WHEN 'RC' THEN (rc_2_2 = compliance.level)\n     WHEN 'Rapporteurs' THEN (rapp_2_2 = compliance.level)\n     WHEN 'Panel' THEN (panel_2_2 = compliance.level)\n    END)) AS `ESG 2.2`,\n  (SELECT count(aid) FROM applications\n    WHERE aid >= 26 AND stage = '8. Completed' AND rc_2_1 IS NOT NULL AND\n    /* EXTRACT(YEAR FROM decisiondate) = %s AND */\n    (CASE compliance.who\n     WHEN 'RC' THEN (rc_2_3 = compliance.level)\n     WHEN 'Rapporteurs' THEN (rapp_2_3 = compliance.level)\n     WHEN 'Panel' THEN (panel_2_3 = compliance.level)\n    END)) AS `ESG 2.3`,\n  (SELECT count(aid) FROM applications\n    WHERE aid >= 26 AND stage = '8. Completed' AND rc_2_1 IS NOT NULL AND\n    /* EXTRACT(YEAR FROM decisiondate) = %s AND */\n    (CASE compliance.who\n     WHEN 'RC' THEN (rc_2_4 = compliance.level)\n     WHEN 'Rapporteurs' THEN (rapp_2_4 = compliance.level)\n     WHEN 'Panel' THEN (panel_2_4 = compliance.level)\n    END)) AS `ESG 2.4`,\n  (SELECT count(aid) FROM applications\n    WHERE aid >= 26 AND stage = '8. Completed' AND rc_2_1 IS NOT NULL AND\n    /* EXTRACT(YEAR FROM decisiondate) = %s AND */\n    (CASE compliance.who\n     WHEN 'RC' THEN (rc_2_5 = compliance.level)\n     WHEN 'Rapporteurs' THEN (rapp_2_5 = compliance.level)\n     WHEN 'Panel' THEN (panel_2_5 = compliance.level)\n    END)) AS `ESG 2.5`,\n  (SELECT count(aid) FROM applications\n    WHERE aid >= 26 AND stage = '8. Completed' AND rc_2_1 IS NOT NULL AND\n    /* EXTRACT(YEAR FROM decisiondate) = %s AND */\n    (CASE compliance.who\n     WHEN 'RC' THEN (rc_2_6 = compliance.level)\n     WHEN 'Rapporteurs' THEN (rapp_2_6 = compliance.level)\n     WHEN 'Panel' THEN (panel_2_6 = compliance.level)\n    END)) AS `ESG 2.6`,\n  (SELECT count(aid) FROM applications\n    WHERE aid >= 26 AND stage = '8. Completed' AND rc_2_1 IS NOT NULL AND\n    /* EXTRACT(YEAR FROM decisiondate) = %s AND */\n    (CASE compliance.who\n     WHEN 'RC' THEN (rc_2_7 = compliance.level)\n     WHEN 'Rapporteurs' THEN (rapp_2_7 = compliance.level)\n     WHEN 'Panel' THEN (panel_2_7 = compliance.level)\n    END)) AS `ESG 2.7`,\n  (SELECT count(aid) FROM applications\n    WHERE aid >= 26 AND stage = '8. Completed' AND rc_2_1 IS NOT NULL AND\n    /* EXTRACT(YEAR FROM decisiondate) = %s AND */\n    (CASE compliance.who\n     WHEN 'RC' THEN (rc_3_1 = compliance.level)\n     WHEN 'Rapporteurs' THEN (rapp_3_1 = compliance.level)\n     WHEN 'Panel' THEN (panel_3_1 = compliance.level)\n    END)) AS `ESG 3.1`,\n  (SELECT count(aid) FROM applications\n    WHERE aid >= 26 AND stage = '8. Completed' AND rc_2_1 IS NOT NULL AND\n    /* EXTRACT(YEAR FROM decisiondate) = %s AND */\n    (CASE compliance.who\n     WHEN 'RC' THEN (rc_3_2 = compliance.level)\n     WHEN 'Rapporteurs' THEN (rapp_3_2 = compliance.level)\n     WHEN 'Panel' THEN (panel_3_2 = compliance.level)\n    END)) AS `ESG 3.2`,\n  (SELECT count(aid) FROM applications\n    WHERE aid >= 26 AND stage = '8. Completed' AND rc_2_1 IS NOT NULL AND\n    /* EXTRACT(YEAR FROM decisiondate) = %s AND */\n    (CASE compliance.who\n     WHEN 'RC' THEN (rc_3_3 = compliance.level)\n     WHEN 'Rapporteurs' THEN (rapp_3_3 = compliance.level)\n     WHEN 'Panel' THEN (panel_3_3 = compliance.level)\n    END)) AS `ESG 3.3`,\n  (SELECT count(aid) FROM applications\n    WHERE aid >= 26 AND stage = '8. Completed' AND rc_2_1 IS NOT NULL AND\n    /* EXTRACT(YEAR FROM decisiondate) = %s AND */\n    (CASE compliance.who\n     WHEN 'RC' THEN (rc_3_4 = compliance.level)\n     WHEN 'Rapporteurs' THEN (rapp_3_4 = compliance.level)\n     WHEN 'Panel' THEN (panel_3_4 = compliance.level)\n    END)) AS `ESG 3.4`,\n  (SELECT count(aid) FROM applications\n    WHERE aid >= 26 AND stage = '8. Completed' AND rc_2_1 IS NOT NULL AND\n    /* EXTRACT(YEAR FROM decisiondate) = %s AND */\n    (CASE compliance.who\n     WHEN 'RC' THEN (rc_3_5 = compliance.level)\n     WHEN 'Rapporteurs' THEN (rapp_3_5 = compliance.level)\n     WHEN 'Panel' THEN (panel_3_5 = compliance.level)\n    END)) AS `ESG 3.5`,\n  (SELECT count(aid) FROM applications\n    WHERE aid >= 26 AND stage = '8. Completed' AND rc_2_1 IS NOT NULL AND\n    /* EXTRACT(YEAR FROM decisiondate) = %s AND */\n    (CASE compliance.who\n     WHEN 'RC' THEN (rc_3_6 = compliance.level)\n     WHEN 'Rapporteurs' THEN (rapp_3_6 = compliance.level)\n     WHEN 'Panel' THEN (panel_3_6 = compliance.level)\n    END)) AS `ESG 3.6`\nFROM (\n  SELECT 'RC' AS who, 'Compliance' AS level\n  UNION SELECT 'RC','Partial compliance'\n  UNION SELECT 'RC','Non-compliance'\n  UNION SELECT 'Rapporteurs','Compliance'\n  UNION SELECT 'Rapporteurs','Partial compliance'\n  UNION SELECT 'Rapporteurs','Non-compliance'\n  UNION SELECT 'Panel','Full compliance'\n  UNION SELECT 'Panel','Substantial compliance'\n  UNION SELECT 'Panel','Partial compliance'\n  UNION SELECT 'Panel','Non-compliance'\n) AS compliance"
    },
    "f2e170c76a86e2823251dd8adf20dfd8": {
      "name": "f2e170c76a86e2823251dd8adf20dfd8",
      "description": "External QA activity: CHECK discrepancies between DEQAR and form data",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "uid",
      "searchable": 0,
      "underlyingTable": "agencyUpdate",
      "templates": [],
      "allowNew": true,
      "allowEdit": true,
      "allowDelete": true,
      "sql": "select\n    `agencyUpdate`.uid AS id,\n    registeredAgency.shortname,\n    `agencyUpdate`.country,\n    `agencyUpdate`.year,\n    `agencyUpdate`.type,\n    `agencyUpdate`.amount,\n    agencyUpdate.source \nfrom `agencyUpdate`\nleft join registeredAgency using(rid)\nleft join `agencyUpdate` as form on\n    form.rid = `agencyUpdate`.rid and \n    form.country = `agencyUpdate`.country and \n    form.type = `agencyUpdate`.type and \n    form.year = `agencyUpdate`.year and \n    form.source != `agencyUpdate`.source\nwhere form.uid is not null\norder by\n    registeredAgency.shortname,\n    agencyUpdate.year,\n    agencyUpdate.country,\n    agencyUpdate.type,\n    agencyUpdate.source;"
    },
    "f9fce7261995d20f90b4a363725aa136": {
      "name": "f9fce7261995d20f90b4a363725aa136",
      "description": "Applications: RC vs panel conclusions - by coordinators",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "_count",
      "searchable": 0,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "select coalesce(organisation.acronym, organisation.longname) as coordinator , ( (panel_2_1 = rc_2_1) or (panel_2_1 in (\"Full compliance\", \"Substantial compliance\") and rc_2_1 = \"Compliance\") ) + ( (panel_2_2 = rc_2_2) or (panel_2_2 in (\"Full compliance\", \"Substantial compliance\") and rc_2_2 = \"Compliance\") ) + ( (panel_2_3 = rc_2_3) or (panel_2_3 in (\"Full compliance\", \"Substantial compliance\") and rc_2_3 = \"Compliance\") ) + ( (panel_2_4 = rc_2_4) or (panel_2_4 in (\"Full compliance\", \"Substantial compliance\") and rc_2_4 = \"Compliance\") ) + ( (panel_2_5 = rc_2_5) or (panel_2_5 in (\"Full compliance\", \"Substantial compliance\") and rc_2_5 = \"Compliance\") ) + ( (panel_2_6 = rc_2_6) or (panel_2_6 in (\"Full compliance\", \"Substantial compliance\") and rc_2_6 = \"Compliance\") ) + ( (panel_2_7 = rc_2_7) or (panel_2_7 in (\"Full compliance\", \"Substantial compliance\") and rc_2_7 = \"Compliance\") ) + ( (panel_3_1 = rc_3_1) or (panel_3_1 in (\"Full compliance\", \"Substantial compliance\") and rc_3_1 = \"Compliance\") ) + ( (panel_3_2 = rc_3_2) or (panel_3_2 in (\"Full compliance\", \"Substantial compliance\") and rc_3_2 = \"Compliance\") ) + ( (panel_3_3 = rc_3_3) or (panel_3_3 in (\"Full compliance\", \"Substantial compliance\") and rc_3_3 = \"Compliance\") ) + ( (panel_3_4 = rc_3_4) or (panel_3_4 in (\"Full compliance\", \"Substantial compliance\") and rc_3_4 = \"Compliance\") ) + ( (panel_3_5 = rc_3_5) or (panel_3_5 in (\"Full compliance\", \"Substantial compliance\") and rc_3_5 = \"Compliance\") ) + ( (panel_3_6 = rc_3_6) or (panel_3_6 in (\"Full compliance\", \"Substantial compliance\") and rc_3_6 = \"Compliance\") ) AS conclusions_equal, count(*) as applications from applications left join registeredAgency using(rid) left join organisation on organisation.oid = applications.coordinator where panel_2_1 is not null and stage = '8. Completed' group by applications.coordinator, conclusions_equal order by coordinator, conclusions_equal desc"
    },
    "fc2da7d36ae36bcbe93665524f9f38dd": {
      "name": "fc2da7d36ae36bcbe93665524f9f38dd",
      "description": "Applications: review panel members, list by country",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "cid",
      "searchable": 0,
      "underlyingTable": "contact",
      "templates": [],
      "allowNew": true,
      "allowEdit": true,
      "allowDelete": true,
      "sql": "SELECT cc AS Country, COALESCE(cid,'===') AS id, IF(cid IS NULL, CONCAT('== TOTAL: ',COUNT(DISTINCT cid),' =='), person) AS Person, SUM(reviews) AS Reviews FROM (SELECT cid, contact.nameEmail AS person, COALESCE(contact.country, MAX(organisation.country), UPPER(REPLACE(REGEXP_REPLACE(contact.email,'.*\\\\.([A-Za-z])\\\\s*', '\\\\1'),'uk','GB')), 'unknown') AS cc, COUNT(DISTINCT arid) AS reviews FROM applicationRole LEFT JOIN contact USING(cid) LEFT JOIN contact_organisation USING(cid) LEFT JOIN organisation USING(oid) WHERE applicationRole.role  != 'Coordinator' GROUP BY cid) AS reviewers GROUP BY cc, cid WITH ROLLUP"
    },
    "fd74ddfb595d02d5f0fc836d21893fc7": {
      "name": "fd74ddfb595d02d5f0fc836d21893fc7",
      "description": "External QA activity: Annual Update emails",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "rid",
      "searchable": 0,
      "underlyingTable": "registeredAgency",
      "templates": [],
      "allowNew": true,
      "allowEdit": true,
      "allowDelete": false,
      "sql": "select registeredAgency.rid AS id, registeredAgency.deqarId, registeredAgency.registerUrl,organisation.longname, organisation.acronym, contact.firstName, contact.email, group_concat(cc.email) from registeredAgency left join organisation using(oid) left join contact on contact.cid = registeredAgency.mainContact left join contact_organisation using(oid) left join contact as cc on cc.cid = contact_organisation.cid and contact_organisation.sendOfficial and cc.cid != registeredAgency.mainContact where registeredAgency.registered group by rid"
    },
    "1799fd2a8dd78a3d89ec00db4eec7be7": {
      "name": "1799fd2a8dd78a3d89ec00db4eec7be7",
      "description": "Applications: time delays",
      "section": "query",
      "userQuery": true,
      "saveQuery": 1,
      "isPublic": 1,
      "priKey": "_count",
      "searchable": 0,
      "underlyingTable": null,
      "templates": [],
      "allowNew": false,
      "allowEdit": false,
      "allowDelete": false,
      "sql": "select applications.aid, applications.selectName, year(applications.submitDate) as year, applications.submitDate , applications.reportDate , applications.reportSubmitted , applications.decisionDate , datediff(applications.reportSubmitted, applications.submitDate) as review_time, datediff(applications.reportSubmitted, applications.reportExpected) as report_delay, datediff(applications.decisionDate, applications.reportSubmitted) as eqar_time from applications where applications.reportSubmitted is not null and applications.submitDate is not null and applications.decisionDate is not null order by aid desc"
    }
  }
}"""

